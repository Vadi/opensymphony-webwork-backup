<html>
    <head>
        <title>Validation</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">

				    <p class="paragraph">If you don&#039;t know already, WebWork uses XWork as its foundation, which does provide a validation framework to help you apply input validation rules to your Actions before they are executed.  This section provide only enough details to help you get started but always refer to <a href="http://wiki.opensymphony.com//display/XW/Validation%2BFramework">XW:Validation Framework</a> for more information.</p><b class="strong">Reference pages</b><ol>
<li> <a href="Simple validators.html">Simple validators</a></li>
<li> <a href="Visitor validation.html">Visitor validation</a></li>
<li> <a href="Client-Side Validation.html">Client-Side Validation</a></li>
<li> <a href="Validation Examples.html">Validation Examples</a></li>
</ol>
<h2 class="heading2"> Register validators</h2><p class="paragraph">Validators must be registered with the ValidatorFactory. This may either be done programmatically, using the registerValidator(String name, Class clazz) static method of the ValidatorFactory, or by putting a file name <b class="strong">validators.xml</b> in the root of the classpath (/WEB-INF/classes) with a structure like this:
<div class="code"><pre>&lt;validators&gt;&#10;    &lt;validator name=&quot;required&quot; class=&quot;com.opensymphony.xwork.validator.validators.RequiredFieldValidator&quot;/&gt;&#10;    &lt;validator name=&quot;requiredstring&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptRequiredStringValidator&quot;/&gt;&#10;    &lt;validator name=&quot;int&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptIntRangeFieldValidator&quot;/&gt;&#10;    &lt;validator name=&quot;date&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptDateRangeFieldValidator&quot;/&gt;&#10;    &lt;validator name=&quot;expression&quot; class=&quot;com.opensymphony.xwork.validator.validators.ExpressionValidator&quot;/&gt;&#10;    &lt;validator name=&quot;fieldexpression&quot; class=&quot;com.opensymphony.xwork.validator.validators.FieldExpressionValidator&quot;/&gt;&#10;    &lt;validator name=&quot;email&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptEmailValidator&quot;/&gt;&#10;    &lt;validator name=&quot;url&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptURLValidator&quot;/&gt;&#10;    &lt;validator name=&quot;visitor&quot; class=&quot;com.opensymphony.webwork.validators.JavaScriptVisitorFieldValidator&quot;/&gt;&#10;    &lt;validator name=&quot;conversion&quot; class=&quot;com.opensymphony.xwork.validator.validators.ConversionErrorFieldValidator&quot;/&gt;&#10;&lt;/validators&gt;</pre></div></p><h2 class="heading2"> Turn on Validation</h2><p class="paragraph">All that is required to enable validation for an Action is to put the ValidationInterceptor in the interceptor refs of the action (see <a href="xwork.xml.html">xwork.xml</a>) like so:
<div class="code"><pre>&lt;interceptor name=&quot;validator&quot; class=&quot;com.opensymphony.xwork.validator.ValidationInterceptor&quot;/&gt;</pre></div></p>Note: The default <b class="strong">validationWorkflowStack</b> already includes this.<p class="paragraph">Validation rules can be specified:
<ol>
<li> Per Action class: ActionName-validation.xml</li>
<li> Per Action alias: ActionName-alias-validation.xml</li>
<li> Inheritance hierarchy and interfaces implemented by Action class: WebWork searches up the inheritance tree of the action to find default validations for parent classes of the Action and interfaces implemented</li>
</ol>
<h2 class="heading2"> Specify what and how to validate</h2>
Here is an example for SimpleAction-validation.xml:</p><div class="code"><pre>&lt;&#33;DOCTYPE validators PUBLIC &quot;&#45;//OpenSymphony Group//XWork Validator 1.0//EN&quot;&#10;        &quot;http&#58;//www.opensymphony.com/xwork/xwork&#45;validator&#45;1.0.dtd&quot;&gt;&#10;&lt;validators&gt;&#10;    &lt;field name=&quot;bar&quot;&gt;&#10;        &lt;field&#45;validator type=&quot;required&quot;&gt;&#10;            &lt;message&gt;You must enter a value for bar.&lt;/message&gt;&#10;        &lt;/field&#45;validator&gt;&#10;        &lt;field&#45;validator type=&quot;int&quot;&gt;&#10;            &lt;param name=&quot;min&quot;&gt;6&lt;/param&gt;&#10;            &lt;param name=&quot;max&quot;&gt;10&lt;/param&gt;&#10;            &lt;message&gt;bar must be between $&#123;min&#125; and $&#123;max&#125;, current value is $&#123;bar&#125;.&lt;/message&gt;&#10;        &lt;/field&#45;validator&gt;&#10;    &lt;/field&gt;&#10;    &lt;field name=&quot;date&quot;&gt;&#10;        &lt;field&#45;validator type=&quot;date&quot;&gt;&#10;            &lt;param name=&quot;min&quot;&gt;12/22/2002&lt;/param&gt;&#10;            &lt;param name=&quot;max&quot;&gt;12/25/2002&lt;/param&gt;&#10;            &lt;message&gt;The date must be between 12&#45;22&#45;2002 and 12&#45;25&#45;2002.&lt;/message&gt;&#10;        &lt;/field&#45;validator&gt;&#10;    &lt;/field&gt;&#10;    &lt;field name=&quot;foo&quot;&gt;&#10;        &lt;field&#45;validator type=&quot;int&quot;&gt;&#10;            &lt;param name=&quot;min&quot;&gt;0&lt;/param&gt;&#10;            &lt;param name=&quot;max&quot;&gt;100&lt;/param&gt;&#10;            &lt;message key=&quot;foo.range&quot;&gt;Could not find foo.range&#33;&lt;/message&gt;&#10;        &lt;/field&#45;validator&gt;&#10;    &lt;/field&gt;&#10;    &lt;validator type=&quot;expression&quot;&gt;&#10;        &lt;param name=&quot;expression&quot;&gt;foo &gt; bar&lt;/param&gt;&#10;        &lt;message&gt;Foo must be greater than Bar. Foo = $&#123;foo&#125;, Bar = $&#123;bar&#125;.&lt;/message&gt;&#10;    &lt;/validator&gt;&#10;&lt;/validators&gt;</pre></div><p class="paragraph">Here we can see the configuration of validators for the SimpleAction class. Validators (and field-validators) must have a <b class="strong">type</b> attribute, which refers to a name of an Validator registered with the ValidatorFactory as above. Validator elements may also have &lt;param&gt; elements with name and value attributes to set arbitrary parameters into the Validator instance. See below for discussion of the message element.</p>Each Validator or Field-Validator element must define one message element inside the validator element body. The message element has 1 attributes, key which is not required. The body of the message tag is taken as the default message which should be added to the Action if the validator fails.<p class="paragraph">Key gives a message key to look up in the Action&#039;s ResourceBundles using getText() from LocaleAware if the Action implements that interface (as ActionSupport does). This provides for Localized messages based on the Locale of the user making the request (or whatever Locale you&#039;ve set into the LocaleAware Action).</p>After either retrieving the message from the ResourceBundle using the Key value, or using the Default message, the current Validator is pushed onto the ValueStack, then the message is parsed for $&#123;...&#125; sections which are replaced with the evaluated value of the string between the $&#123; and &#125;. This allows you to parameterize your messages with values from the Validator, the Action, or both. Here is an example of a parameterized message:

<div class="code"><pre>bar must be between $&#123;min&#125; and $&#123;max&#125;, current value is $&#123;bar&#125;.</pre></div><p class="paragraph">This will pull the min and max parameters from the IntRangeFieldValidator and the value of bar from the Action.</p>

				    
			    </td>
		    </tr>
	    </table>
    </body>
</html>

<html>
    <head>
        <title>JUnit</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">

				    <p class="paragraph">There&#039;s a number of approaches you can take to unit-test your WebWork actions.</p><h2 class="heading2"> The simplest is to instantiate your actions, call setters then execute().  This allows you to bypass all the complicated container setup.</h2><p class="paragraph">Taken from Petsoar:
<div class="code"><pre><span class="java&#45;keyword">package</span> org.petsoar.actions.inventory;&#10;&#10;<span class="java&#45;keyword">import</span> com.mockobjects.constraint.IsEqual;&#10;<span class="java&#45;keyword">import</span> com.mockobjects.dynamic.C;&#10;<span class="java&#45;keyword">import</span> com.mockobjects.dynamic.Mock;&#10;<span class="java&#45;keyword">import</span> com.opensymphony.xwork.Action;&#10;<span class="java&#45;keyword">import</span> junit.framework.TestCase;&#10;<span class="java&#45;keyword">import</span> org.petsoar.pets.Pet;&#10;<span class="java&#45;keyword">import</span> org.petsoar.pets.PetStore;&#10;&#10;<span class="java&#45;keyword">public</span> class TestViewPet <span class="java&#45;keyword">extends</span> TestCase &#123;&#10;    <span class="java&#45;keyword">private</span> Mock mockPetStore;&#10;    <span class="java&#45;keyword">private</span> ViewPet action;&#10;&#10;    <span class="java&#45;keyword">protected</span> void setUp() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;        mockPetStore = <span class="java&#45;keyword">new</span> Mock(PetStore.class);&#10;        PetStore petStore = (PetStore) mockPetStore.proxy();&#10;&#10;        action = <span class="java&#45;keyword">new</span> ViewPet();&#10;        action.setPetStore(petStore);&#10;    &#125;&#10;&#10;    <span class="java&#45;keyword">public</span> void testViewPet() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;        Pet existingPet = <span class="java&#45;keyword">new</span> Pet();&#10;        existingPet.setName(&quot;harry&quot;);&#10;        existingPet.setId(1);&#10;&#10;        Pet expectedPet = <span class="java&#45;keyword">new</span> Pet();&#10;        expectedPet.setName(&quot;harry&quot;);&#10;        expectedPet.setId(1);&#10;&#10;        mockPetStore.expectAndReturn(&quot;getPet&quot;, C.args(<span class="java&#45;keyword">new</span> IsEqual(<span class="java&#45;keyword">new</span> <span class="java&#45;object">Long</span>(1))), existingPet);&#10;        action.setId(1);&#10;&#10;        <span class="java&#45;object">String</span> result = action.execute();&#10;&#10;        assertEquals(Action.SUCCESS, result);&#10;        assertEquals(expectedPet, existingPet);&#10;        mockPetStore.verify();&#10;    &#125;&#10;&#10;    <span class="java&#45;keyword">public</span> void testViewPetNoId() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;        mockPetStore.expectAndReturn(&quot;getPet&quot;, C.ANY&#95;ARGS, <span class="java&#45;keyword">null</span>);&#10;&#10;        <span class="java&#45;object">String</span> result = action.execute();&#10;&#10;        assertEquals(Action.ERROR, result);&#10;        assertEquals(1, action.getActionErrors().size());&#10;        assertEquals(&quot;Invalid pet selected.&quot;, action.getActionErrors().iterator().next());&#10;        assertNull(action.getPet());&#10;        mockPetStore.verify();&#10;    &#125;&#10;&#10;    <span class="java&#45;keyword">public</span> void testViewPetInvalidId() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;        action.setId(&#45;1);&#10;        testViewPetNoId();&#10;    &#125;&#10;&#125;</pre></div></p><h2 class="heading2"> Test interceptors and/or result types</h2><p class="paragraph">Check out the test suites in XWork/WebWork.  These are pretty comprehensive and provide a good starting point.  For example,  this is how the <b class="strong">ParametersInterceptor</b> is tested:</p><div class="code"><pre><span class="java&#45;keyword">public</span> void testDoesNotAllowMethodInvocations() &#123;&#10;    Map params = <span class="java&#45;keyword">new</span> HashMap();&#10;    params.put(&quot;&#64;java.lang.<span class="java&#45;object">System</span>&#64;exit(1).dummy&quot;, &quot;dumb value&quot;);&#10;&#10;    HashMap extraContext = <span class="java&#45;keyword">new</span> HashMap();&#10;    extraContext.put(ActionContext.PARAMETERS, params);&#10;&#10;    <span class="java&#45;keyword">try</span> &#123;&#10;        ActionProxy proxy = ActionProxyFactory.getFactory().&#10;               createActionProxy(&quot;&quot;, MockConfigurationProvider.MODEL&#95;DRIVEN&#95;PARAM&#95;TEST, extraContext);&#10;        assertEquals(Action.SUCCESS, proxy.execute());&#10;&#10;        ModelDrivenAction action = (ModelDrivenAction) proxy.getAction();&#10;        TestBean model = (TestBean) action.getModel();&#10;&#10;        <span class="java&#45;object">String</span> property = <span class="java&#45;object">System</span>.getProperty(&quot;webwork.security.test&quot;);&#10;        assertNull(property);&#10;    &#125; <span class="java&#45;keyword">catch</span> (Exception e) &#123;&#10;        e.printStackTrace();&#10;        fail();&#10;    &#125;&#10;&#125;</pre></div>
<p class="paragraph">Note: these are not the ONLY ways so make your own judgement.</p>

				    
			    </td>
		    </tr>
	    </table>
    </body>
</html>

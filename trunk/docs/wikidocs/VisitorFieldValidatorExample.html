<html>
    <head>
        <title>WebWork - 
        VisitorFieldValidatorExample
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <p>I've been using the validator in webwork and have found myself duplicating a few of the validations throughout the app, so after asking a few questions I was told what to do.</p>

<p>basically I have a creation form to create a Car, and then I have another to Edit and Update the Car, I wanted to create just one validation file that would validate that Car, I was using 2 validation files, CreateCarAction-validation.xml and UpdateCarAction-validation.xml and both were identical.</p>

<p>what I had to do was:</p>

<p>first i had to expose the Car object in my action, then I had to create a validation file for the action, and placed this file in the same package as the CarAction in this example;</p>

<p>CarAction-validation.xml</p>
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;!DOCTYPE validators PUBLIC <span class="code-quote">"-<span class="code-comment">//OpenSymphony Group//XWork Validator 1.0//EN"</span> <span class="code-quote">"http://www.opensymphony.com/xwork/xwork-validator-1.0.dtd"</span>&gt;
</span>&lt;validators&gt;
    &lt;field name=<span class="code-quote">"car"</span>&gt;
        &lt;field-validator type=<span class="code-quote">"visitor"</span>&gt;
            &lt;message&gt;Car Visitor: &lt;/message&gt;
        &lt;/field-validator&gt;
    &lt;/field&gt;
&lt;/validators&gt;</pre>
</div></div> 

<p>next I had to create Car-validation.xml file and put this file in the same package as the Car class</p>

<p>Car-validation.xml</p>
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;!DOCTYPE validators PUBLIC <span class="code-quote">"-<span class="code-comment">//OpenSymphony Group//XWork Validator 1.0//EN"</span> <span class="code-quote">"http://www.opensymphony.com/xwork/xwork-validator-1.0.dtd"</span>&gt;
</span>&lt;validators&gt;

    &lt;field name=<span class="code-quote">"name"</span>&gt;
        &lt;field-validator type=<span class="code-quote">"requiredstring"</span>&gt;
            &lt;message&gt;Name is REQUIRED&lt;/message&gt;
        &lt;/field-validator&gt;
    &lt;/field&gt;
    &lt;field name=<span class="code-quote">"model"</span>&gt;
        &lt;field-validator type=<span class="code-quote">"requiredstring"</span>&gt;
            &lt;message&gt;Model is REQUIRED&lt;/message&gt;
        &lt;/field-validator&gt;
    &lt;/field&gt;

&lt;/validators&gt;</pre>
</div></div>

<p>so now if the input strings car.model and car.name are empty you should get fieldErrors added to the car.name and car.model fields, you just need to make sure that in your action you expose the Car object.</p>

<p>heres the CarAction.java file:</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class CarAction <span class="code-keyword">extends</span> ActionSupport {

    <span class="code-keyword">private</span> Car car = <span class="code-keyword">new</span> Car();

    <span class="code-keyword">public</span> Car getCar() {
        <span class="code-keyword">return</span> car;
    }

    <span class="code-keyword">public</span> void setCar(Car car) {
        <span class="code-keyword">this</span>.car = car;
    }

    <span class="code-keyword">public</span> <span class="code-object">String</span> execute() {
        <span class="code-keyword">return</span> SUCCESS;
    }


}</pre>
</div></div>
<p>heres my Car bean:</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Car {
    <span class="code-keyword">private</span> <span class="code-object">String</span> name;
    <span class="code-keyword">private</span> <span class="code-object">String</span> model;

    <span class="code-keyword">public</span> Car() {}

   <span class="code-keyword">public</span> <span class="code-object">String</span> getName() {
        <span class="code-keyword">return</span> name;
    }

    <span class="code-keyword">public</span> void setName(<span class="code-object">String</span> name) {
        <span class="code-keyword">this</span>.name = name;
    }

    <span class="code-keyword">public</span> <span class="code-object">Integer</span> getId() {
        <span class="code-keyword">return</span> id;
    }

    <span class="code-keyword">public</span> void setId(<span class="code-object">Integer</span> id) {
        <span class="code-keyword">this</span>.id = id;
    }

    <span class="code-keyword">public</span> <span class="code-object">String</span> getModel() {
        <span class="code-keyword">return</span> model;
    }

    <span class="code-keyword">public</span> void setModel(<span class="code-object">String</span> model) {
        <span class="code-keyword">this</span>.model = model;
    }
}</pre>
</div></div>
<p>and then the car.vm file:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;form method=<span class="code-quote">"get"</span>&gt;

&lt;table border=<span class="code-quote">"1"</span> align=<span class="code-quote">"center"</span>&gt;

    #tag( TextField <span class="code-quote">"label=Car ID"</span> <span class="code-quote">"name=car.id"</span> <span class="code-quote">"value=car.id"</span> )
    #tag( TextField <span class="code-quote">"label=Car Name"</span> <span class="code-quote">"name=car.name"</span> <span class="code-quote">"value=car.name"</span> )
    #tag( TextField <span class="code-quote">"label=Car Model"</span> <span class="code-quote">"name=car.model"</span> <span class="code-quote">"value=car.model"</span> )

    #tag( Submit <span class="code-quote">"value='Submit Car'"</span> <span class="code-quote">"align=center"</span>)

&lt;/table&gt;

&lt;/form&gt;</pre>
</div></div>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

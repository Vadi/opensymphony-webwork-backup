<html>
    <head>
        <title>Quartz</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">

				    <p class="paragraph">The following class performs the glue between Quartz and Webwork:</p><div class="code"><pre><span class="java&#45;keyword">package</span> com.trantek.sit.action;&#10;&#10;<span class="java&#45;keyword">import</span> com.opensymphony.xwork.ActionProxy;&#10;<span class="java&#45;keyword">import</span> com.opensymphony.xwork.ActionProxyFactory;&#10;<span class="java&#45;keyword">import</span> org.quartz.Job;&#10;<span class="java&#45;keyword">import</span> org.quartz.JobExecutionContext;&#10;<span class="java&#45;keyword">import</span> org.quartz.JobExecutionException;&#10;&#10;<span class="java&#45;keyword">public</span> class WebWorkJob <span class="java&#45;keyword">implements</span> Job&#10;&#123;&#10;    <span class="java&#45;keyword">public</span> void execute(JobExecutionContext context) <span class="java&#45;keyword">throws</span> JobExecutionException&#10;    &#123;&#10;        <span class="java&#45;keyword">try</span>&#10;        &#123;&#10;            ActionProxy proxy = ActionProxyFactory.getFactory().&#10;                    createActionProxy(&quot;&quot;, context.getJobDetail().getName(), context.getJobDetail().getJobDataMap());&#10;&#10;            proxy.execute();&#10;        &#125;&#10;        <span class="java&#45;keyword">catch</span> (Exception e)&#10;        &#123;&#10;            <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> JobExecutionException(e);&#10;        &#125;&#10;    &#125;&#10;&#125;</pre></div><p class="paragraph">To schedule webwork actions you simply create a job where
<ul class="star">
<li> the name of your job is the name of the WW action to execute (no &quot;.action&quot; suffix).</li>
<li> all the parameters you want to send to the WW action is contained in the JobDataMap of the JobDetail</li>
</ul></p>(the Quartz scheduler is setup as a servlet according to the javadocs of org.quartz.ee.servlet.QuartzInitializerServlet.)<p class="paragraph">The following code schedules an e-mail action:</p><div class="code"><pre>Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();&#10;&#10;JobDetail jobDetail = <span class="java&#45;keyword">new</span> JobDetail(&quot;email.send&quot;, &#10;                                     scheduler.DEFAULT&#95;GROUP, WebworkJob.class);&#10;&#10;Map m = jobDetail.getJobDataMap();&#10;m.put(&quot;to&quot;, &quot;me&#64;bogusdomain.com&quot;);&#10;m.put(&quot;subject&quot;, &quot;quartz test&quot;);&#10;m.put(&quot;body&quot;, &quot;This is a quartz test, Hey ho&quot;);&#10;m.put(&quot;smtpServer&quot;, &quot;smtp.bogusdomain.com&quot;);&#10;m.put(&quot;from&quot;, &quot;quartz&#64;bogusdomain.com&quot;);&#10;&#10;SimpleTrigger trigger = <span class="java&#45;keyword">new</span> SimpleTrigger(&quot;myTrigger&quot;, &#10;                                          scheduler.DEFAULT&#95;GROUP, &#10;                                          <span class="java&#45;keyword">new</span> Date(), <span class="java&#45;keyword">null</span>, 0, 0L);&#10;&#10;scheduler.deleteJob(&quot;email.send&quot;, scheduler.DEFAULT&#95;GROUP);&#10;scheduler.scheduleJob(jobDetail, trigger);</pre></div><p class="paragraph">This example is based on <a href="http://wiki.opensymphony.com//display/WW1/Integrating%2BWebwork%2Band%2BQuartz">WW1:Integrating Webwork and Quartz</a></p>

				    
			    </td>
		    </tr>
	    </table>
    </body>
</html>

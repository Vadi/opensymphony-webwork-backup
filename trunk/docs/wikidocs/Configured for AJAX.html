<html>
    <head>
        <title>WebWork - 
        Configured for AJAX
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <h3><a name="ConfiguredforAJAX-CommonConfiguration">Common Configuration</a></h3>

<p>The following configuration is required for the ajax theme.  It is suggested that this goes into a common template so that it doesn't need to be manually included on every page.</p>

<div class="code"><div class="codeContent">
<pre class="code-none">&lt;script language="JavaScript" type="text/javascript"&gt;
    // Dojo configuration
    djConfig = {
        baseRelativePath: "&lt;ww:url includeParams="none" value="/webwork/dojo/"/&gt;",
        isDebug: false,
        debugAtAllCosts: true // not needed, but allows the Venkman debugger to work with the includes
    };
&lt;/script&gt;

&lt;script language="JavaScript" type="text/javascript"
        src="&lt;ww:url includeParams="none" value="/webwork/dojo/dojo.js" /&gt;"&gt;&lt;/script&gt;
&lt;script language="JavaScript" type="text/javascript"
        src="&lt;ww:url includeParams="none" value="/webwork/CommonFunctions.js" /&gt;"&gt;&lt;/script&gt;

&lt;script language="JavaScript" type="text/javascript"&gt;
    dojo.require("dojo.io.BrowserIO");
    dojo.require("dojo.event.topic");
    dojo.require("webwork.widgets.Bind");
    dojo.require("webwork.widgets.BindDiv");
    dojo.require("webwork.widgets.BindButton");
    dojo.require("webwork.widgets.BindAnchor");
    dojo.hostenv.writeIncludes(); // not needed, but allows the Venkman debugger to work with the includes
&lt;/script&gt;</pre>
</div></div>

<div class="information-block" align='center'><div class='informationMacroPadding'><table cellpadding='5' width='85%' cellspacing='0' class='warningMacro' border='0'><tr><td width='16' valign='top'><img src="/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Lessons Learned</b><br />
<p>Dojo is particular about the onload event.<br/>
<a href="http://forums.opensymphony.com/thread.jspa?messageID=10297&amp;#10297" title="Visit page outside Confluence">This thread details the whole thing</a><br/>
But if you want the cliff notes... Dont do this:<br/>
window.onload= function()<div class="error"><span class="error">Unknown macro: { . . . }</span> </div></p>

<p>This was preventing dojo from parsing the widgets, since dojo<br/>
hooks into window.onload in dojo.js, which you just<br/>
overwrote </p>

<p>You should use this :<br/>
&lt;script language="JavaScript" type="text/javascript"&gt;<br/>
 dojo.event.connect (window, "onload" , function() {<br/>
...<br/>
});</p>

</td></tr></table></div></div>

<h3><a name="ConfiguredforAJAX-LooslyCoupledComponents">Loosly Coupled Components</a></h3>

<p>A benifit of using dojo as the basis of many of these components is being able to loosely couple UI components.  There are 2 attributes of importance - "listenTopics" and "notifyTopics".  </p>

<ul class="alternate" type="square">
	<li>If a component has a "notifyTopics" attribute, then after the processing has been completed a message with be published to the topic names supplied as a value (comma delimited).</li>
	<li>If a component has a "listenTopics" attribute, then when a message is published to the topic names supplied as a value (comma delimited), the component will re-fresh its content.</li>
</ul>


<p>As well as this, you can publish to topic names with javascript code.  </p>
<div class="code"><div class="codeContent">
<pre class="code-java">dojo.event.topic.publish( <span class="code-quote">"topic_name"</span>, <span class="code-quote">"content"</span> );</pre>
</div></div>

<p>The "topic_name" attribute is required, the "content" is not and most elements are triggered without having this attribute.</p>

<p>An example of using this approach would be that multiple remote DIV's could be updated after a remote link has been clicked - especially if the remote links were controls/actions for a row in a table that is itself contained in a remote DIV.</p>

<p><a href="http://wiki.opensymphony.com//display/WW/Developing+WW+Ajax+Widgets" title="Developing WW Ajax Widgets">Developing WW Ajax Widgets</a> - Developers of WW who are interested in maintaining and creating new DOJO widgets should read this.</p>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

<html>
    <head>
        <title>WebWork - 
        Themes
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <p>A Theme is a set of <a href="Templates.html" title="Templates">Templates</a> used to customize web page development with UI tags.  They provide a powerful mechanism to help web developers spice up the UI with a mixture of styles (colors, fonts, etc).  For example, you may want half your form textfields to have a blue background and half a white background.   A couple of notes:</p>

<ul>
	<li>Webwork comes with 2 pre-defined themes; "simple" and "xhtml" (default).  The default location webwork looks for themes in your web application is <tt>/template</tt>.  The default theme is <tt>xhtml</tt>.  Default, meaning that it will be used if you don't specify a theme attribute in your UI tag.  <ins>Note:</ins> The default values can be overridden in your <a href="webwork.properties.html" title="webwork.properties">webwork.properties</a> file with <tt>webwork.ui.theme=</tt>  and <tt>webwork.ui.templateDir=</tt>.</li>
</ul>


<ul>
	<li>Custom themes can also be created to tailor your own needs.  We recommend you consult the pre-defined templates as a starting point before you create your own.</li>
</ul>


<ul>
	<li>Every time a UI tag is used, the tag is rendered into html by referencing a template.  So they play a key role in how fields look and are positioned in a page.  Currently, only velocity templates are supported out of the box.  However, expect to see more support for creating JSP templates in future releases.</li>
</ul>


<p><ins>Note:</ins> Before moving forward, it is recommended that you review how the webwork template system works.  (see <a href="Templates.html" title="Templates">Templates</a>)</p>

<h3><a name="Themes-xhtml">xhtml</a></h3>

<p><tt>xhtml</tt> comes configured as the default theme for Webwork.  It extends the simple theme providing built in functionality for error reporting, table positioning, and labeling.  Lets look at one of the most common UI tags used, <tt>textfield</tt>, and show the proper way to write your views with the xhtml theme.</p>

<p>As you may already know, the default UI template used for the textfield tag is text.vm located under the directory /template/xhtml.</p>
<div class="code"><div class="codeContent">
<pre class="code-java">#*
   -- text.vm
*#
## notice the re-use of the simple theme template text.vm
#parse(<span class="code-quote">"/template/xhtml/controlheader.vm"</span>)
#parse(<span class="code-quote">"/template/simple/text.vm"</span>)
#parse(<span class="code-quote">"/template/xhtml/controlfooter.vm"</span>)</pre>
</div></div>
<p>When this template is loaded, it will first parse and render the /template/xhtml/controlheader.vm.  Within controlheader.vm you will notice functionlity for error reporting, labeling and table positioning.  If ActionSupport is returning with some errors, they are rendered into html using this this template.  Also you will notice how it grabs the parameter.label value and positions it with the textfield using the table elements tr and td.</p>

<div class="code"><div class="codeContent">
<pre class="code-xml">#*
   -- controlheader.vm
*#
## Only show message if errors are available.
## This will be done if ActionSupport is used.

#if( $fieldErrors.get($parameters.name) )
  #set ($hasFieldErrors = $fieldErrors.get($parameters.name))
  #foreach ($error in $fieldErrors.get($parameters.name))
    <span class="code-tag">&lt;tr&gt;</span>
        #if ($parameters.labelposition == 'top')
            <span class="code-tag">&lt;td align=<span class="code-quote">"left"</span> valign=<span class="code-quote">"top"</span> colspan=<span class="code-quote">"2"</span>&gt;</span>
        #else
            <span class="code-tag">&lt;td align=<span class="code-quote">"center"</span> valign=<span class="code-quote">"top"</span> colspan=<span class="code-quote">"2"</span>&gt;</span>
        #end
            <span class="code-tag">&lt;span class=<span class="code-quote">"errorMessage"</span>&gt;</span>$!webwork.htmlEncode($error)<span class="code-tag">&lt;/span&gt;</span>
            <span class="code-tag">&lt;/td&gt;</span>
    <span class="code-tag">&lt;/tr&gt;</span>
  #end
#end

## Provides alignment behavior with table tags
## if the label position is top,
## then give the label it's own row in the table
## otherwise, display the label to the left on same row

<span class="code-tag">&lt;tr&gt;</span>
    #if ($parameters.labelposition == 'top')
        <span class="code-tag">&lt;td align=<span class="code-quote">"left"</span> valign=<span class="code-quote">"top"</span> colspan=<span class="code-quote">"2"</span>&gt;</span>
    #else
        <span class="code-tag">&lt;td align=<span class="code-quote">"right"</span> valign=<span class="code-quote">"top"</span>&gt;</span>
    #end

        #if ($hasFieldErrors)
            <span class="code-tag">&lt;span class=<span class="code-quote">"errorLabel"</span>&gt;</span>
        #else
            <span class="code-tag">&lt;span class=<span class="code-quote">"label"</span>&gt;</span>
        #end

## If you want to mark required form fields with an asterisk, 
## you can set the required attribute
## Ex. <span class="code-tag">&lt;ui:textfield label=<span class="code-quote">"'mylabel'"</span> name=<span class="code-quote">"'myname'"</span> required=<span class="code-quote">"'true'"</span> /&gt;</span> 
        #if ($parameters.label)
            #if ($parameters.required) <span class="code-tag">&lt;span class=<span class="code-quote">"required"</span>&gt;</span>*<span class="code-tag">&lt;/span&gt;</span> #end 
               $!webwork.htmlEncode($parameters.label):
        #end
            <span class="code-tag">&lt;/span&gt;</span>
        <span class="code-tag">&lt;/td&gt;</span>

## add the extra row
#if ($parameters.labelposition == 'top')
<span class="code-tag">&lt;/tr&gt;</span>
<span class="code-tag">&lt;tr&gt;</span>
#end
    <span class="code-tag">&lt;td&gt;</span></pre>
</div></div>
<p>The next template being parsed in /template/xhtml/text.vm is /template/simple/text.vm.  Here you see the actual html input text tag being rendered and how the parameters are passed in.</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">#*
  -- text.vm
  --
  -- Required Parameters:
  --   * label      - The description that will be used to identfy the control.
  --   * name       - The name of the attribute to put and pull the result from.
  --                  Equates to the NAME parameter of the HTML INPUT tag.
  --
  -- Optional Parameters:
  --   * labelposition   - determines were the label will be place in relation
  --                       to the control.  Default is to the left of the control.
  --   * size       - SIZE parameter of the HTML INPUT tag.
  --   * maxlength  - MAXLENGTH parameter of the HTML INPUT tag.
  --   * disabled   - DISABLED parameter of the HTML INPUT tag.
  --   * readonly   - READONLY parameter of the HTML INPUT tag.
  --   * onkeyup    - onkeyup parameter of the HTML INPUT tag.
  --   * tabindex  - tabindex parameter of the HTML INPUT tag.
  --   * onchange  - onkeyup parameter of the HTML INPUT tag.
  --
    *#
&lt;input type=<span class="code-quote">"text"</span>
                                   name=<span class="code-quote">"$!webwork.htmlEncode($parameters.name)"</span>
#if ($parameters.size)             size=<span class="code-quote">"$!webwork.htmlEncode($parameters.size)"</span>            #end
#if ($parameters.maxlength)        maxlength=<span class="code-quote">"$!webwork.htmlEncode($parameters.maxlength)"</span>  #end
#if ($parameters.nameValue)        value=<span class="code-quote">"$!webwork.htmlEncode($parameters.nameValue)"</span>      #end
#if ($parameters.disabled == true) disabled=<span class="code-quote">"disabled"</span>                                      #end
#if ($parameters.readonly)         readonly=<span class="code-quote">"readonly"</span>                                      #end
#if ($parameters.onkeyup)          onkeyup=<span class="code-quote">"$!webwork.htmlEncode($parameters.onkeyup)"</span>      #end
#if ($parameters.tabindex)         tabindex=<span class="code-quote">"$!webwork.htmlEncode($parameters.tabindex)"</span>    #end
#if ($parameters.onchange)         onchange=<span class="code-quote">"$!webwork.htmlEncode($parameters.onchange)"</span>    #end
#if ($parameters.id)               id=<span class="code-quote">"$!webwork.htmlEncode($parameters.id)"</span>                #end
#if ($parameters.cssClass)         class=<span class="code-quote">"$!webwork.htmlEncode($parameters.cssClass)"</span>       #end
#if ($parameters.cssStyle)         style=<span class="code-quote">"$!webwork.htmlEncode($parameters.cssStyle)"</span>       #end
/&gt;</pre>
</div></div> 
<p>And finally, the controlfooter.vm is parsed to close up the td and tr tags that were previously opened in controlheader.vm</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">#*
   -- controlheader.vm
*#

  <span class="code-tag">&lt;/td&gt;</span>
<span class="code-tag">&lt;/tr&gt;</span></pre>
</div></div>

<p>In our view, since the tr and td elements are already created for us, we can simply wrap them with table elements.  For the sake of learning, we will just use normal html table objects, but feel free to look into how the table.vm tag gets rendered and possibly use that.</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;%@ taglib uri=<span class="code-quote">"webwork"</span> prefix=<span class="code-quote">"ui"</span> %&gt;</span>
<span class="code-tag">&lt;link rel =<span class="code-quote">"stylesheet"</span> type=<span class="code-quote">"text/css"</span> href=<span class="code-quote">"template/xhtml/styles.css"</span> title=<span class="code-quote">"Style"</span>&gt;</span>
<span class="code-tag">&lt;html&gt;</span>
<span class="code-tag">&lt;head&gt;</span><span class="code-tag">&lt;title&gt;</span>JSP PAGE<span class="code-tag">&lt;/title&gt;</span><span class="code-tag">&lt;/head&gt;</span>
<span class="code-tag">&lt;body&gt;</span>
<span class="code-tag">&lt;form&gt;</span>
  <span class="code-tag">&lt;table&gt;</span>
	&lt;!-- we can set the required attribute to true if we want to 
	     display and asterisk next to required form fields
	 --&gt;

	<span class="code-tag">&lt;ui:textfield label=<span class="code-quote">"'Username'"</span> required=<span class="code-quote">"'true'"</span> name=<span class="code-quote">"'user'"</span> /&gt;</span> 
	<span class="code-tag">&lt;ui:textfield label=<span class="code-quote">"'Email'"</span> name=<span class="code-quote">"'email'"</span>/&gt;</span> 
  <span class="code-tag">&lt;/table&gt;</span>
<span class="code-tag">&lt;/form&gt;</span>
<span class="code-tag">&lt;/body&gt;</span>
<span class="code-tag">&lt;/html&gt;</span></pre>
</div></div>

<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;link rel =<span class="code-quote">"stylesheet"</span> type=<span class="code-quote">"text/css"</span> href=<span class="code-quote">"template/xhtml/styles.css"</span> title=<span class="code-quote">"Style"</span>&gt;</span>
<span class="code-tag">&lt;html&gt;</span>
<span class="code-tag">&lt;head&gt;</span><span class="code-tag">&lt;title&gt;</span>VM PAGE<span class="code-tag">&lt;/title&gt;</span><span class="code-tag">&lt;/head&gt;</span>
<span class="code-tag">&lt;body&gt;</span>
<span class="code-tag">&lt;form&gt;</span>
  <span class="code-tag">&lt;table&gt;</span>
    #tag( TextField <span class="code-quote">"label='Username'"</span> <span class="code-quote">"name='user'"</span> )<span class="code-tag">&lt;br&gt;</span>
    #tag( TextField <span class="code-quote">"label='Email'"</span> <span class="code-quote">"name='email'"</span> )<span class="code-tag">&lt;br&gt;</span>
  <span class="code-tag">&lt;/table&gt;</span>
<span class="code-tag">&lt;/form&gt;</span>
<span class="code-tag">&lt;/body&gt;</span>
<span class="code-tag">&lt;/html&gt;</span></pre>
</div></div>

<h3><a name="Themes-cssxhtml">css_xhtml</a></h3>
<p>The css_xhtml theme is a theme based entirely on css and thus avoids the dependency on tables.  <br/>
Lets review the code to see how this theme works.</p>
<div class="code"><div class="codeHeader"><b>Generated HTML code</b></div><div class="codeContent">
<pre class="code-java">&lt;div&gt;
&lt;p&gt;
&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"frm1_caseBean.title"</span> class=<span class="code-quote">"label"</span>&gt;&lt;span class=<span class="code-quote">"required"</span>&gt;*&lt;/span&gt;Title:&lt;/label&gt;
&lt;input name=<span class="code-quote">"caseBean.title"</span> size=<span class="code-quote">"70"</span> id=<span class="code-quote">"frm1__caseBean.title"</span> onblur=<span class="code-quote">"validate(<span class="code-keyword">this</span>);"</span> type=<span class="code-quote">"text"</span>&gt;
&lt;/p&gt;
&lt;/div&gt;</pre>
</div></div>
<p>The first thing of note is the containing DIV tag. This is the container element that will be filled with Field Validation errors.   The second element is the P, this is a block element and will thusly but both the lable and the control on its own line.  notice how we use the 'for' attribute of the label tag? That helps to identify that this label is for a control. This feature is uber cool for checkboxes as it extends the clickable range of the checkbox to the label as well!!! </p>

<p>You might also have noticed the CSS class attributes... lets review these:</p>
<div class="preformatted"><div class="preformattedContent">
<pre>.label {
    font-style:italic;
    float:left;
    width:30%
}
.errorLabel {font-style:italic; color:red; }
.errorMessage {font-weight:bold; text-align: center; color:red; }
.checkboxLabel {}
.checkboxErrorLabel {color:red; }
.required {color:red;}
</pre>
</div></div>

<p>This style sheet is included in the WW2.2 packaging.  All you need to do to take advantage of it is include this line in your header:<br/>
&lt;link href="&lt;%=request.getContextPath()%&gt;/webwork/template/css_xhtml/styles.css" rel="stylesheet" type="text/css"&gt;</p>

<p>If you want to customize any attribute of these CSS rules.. just put your deltas into your own css file and include it AFTER the above css include.</p>


<p>Some interesting things about the theme are how it supports both standard validation and DWR validation.  Lets review the structure of some generated code to understand how the css_xhtml theme does validation.  </p>
<div class="preformatted"><div class="preformattedContent">
<pre>&lt;div&gt;

&lt;p&gt;

&lt;div errorfor="frm1_bo.emailAddress" classname="errorMessage" class="errorMessage"&gt;Incorrect Email&lt;/div&gt;&lt;label classname="errorLabel" for="frm1_bo.emailAddress" class="errorLabel"&gt;&lt;span class="required"&gt;*&lt;/span&gt;Email:&lt;/label&gt;
        
&lt;input name="bo.emailAddress" size="20" value="not_yet_d@efined.com" id="frm1_bo.emailAddress" onblur="validate(this);" type="text"&gt;
&lt;/p&gt;
&lt;/div&gt;
</pre>
</div></div>
<p>The validation gets inserted into the structure for you by either the validation.js script if your using the DWR Client Side validator or server side template if your using standard validation.  </p>

<div class="information-block" align='center'><div class='informationMacroPadding'><table cellpadding='5' width='85%' cellspacing='0' class='warningMacro' border='0'><tr><td width='16' valign='top'><img src="/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">No Orientation Support</b><br />
<p>Some themes support label orientation... ie:either top or bottom... this theme does not.</p></td></tr></table></div></div>
<h3><a name="Themes-simple">simple</a></h3>

<p>The <tt>simple</tt> theme provides no additional functionality from HTML tags (similiar to struts).  This theme is considered the low end of the structure and can be re-used (extended) like xhtml to add additional functionality or behavior.  You can easily create your own theme and extend this one to create complex pages that fit your own needs.<br/>
To use the pre-defined theme <tt>simple</tt></p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;%@ taglib uri=<span class="code-quote">"webwork"</span> prefix=<span class="code-quote">"ui"</span> %&gt;</span>
<span class="code-tag">&lt;link rel =<span class="code-quote">"stylesheet"</span> type=<span class="code-quote">"text/css"</span> href=<span class="code-quote">"template/xhtml/styles.css"</span> title=<span class="code-quote">"Style"</span>&gt;</span>
<span class="code-tag">&lt;html&gt;</span>
<span class="code-tag">&lt;head&gt;</span><span class="code-tag">&lt;title&gt;</span>JSP PAGE<span class="code-tag">&lt;/title&gt;</span><span class="code-tag">&lt;/head&gt;</span>
<span class="code-tag">&lt;body&gt;</span>
  <span class="code-tag">&lt;form&gt;</span>
	<span class="code-tag">&lt;ui:label name=<span class="code-quote">"'userlabel'"</span> label=<span class="code-quote">"'user"</span> theme=<span class="code-quote">"'simple'"</span>/&gt;</span>
                <span class="code-tag">&lt;ui:textfield name=<span class="code-quote">"'user'"</span> theme=<span class="code-quote">"'simple'"</span>/&gt;</span>

	<span class="code-tag">&lt;ui:label name=<span class="code-quote">"'emaillabel'"</span> label=<span class="code-quote">"'user"</span> theme=<span class="code-quote">"'simple'"</span>/&gt;</span>
                <span class="code-tag">&lt;ui:textfield name=<span class="code-quote">"'email'"</span> theme=<span class="code-quote">"'simple'"</span>/&gt;</span>
  <span class="code-tag">&lt;/form&gt;</span>
<span class="code-tag">&lt;/body&gt;</span>
<span class="code-tag">&lt;/html&gt;</span></pre>
</div></div>

<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;link rel =<span class="code-quote">"stylesheet"</span> type=<span class="code-quote">"text/css"</span> href=<span class="code-quote">"template/xhtml/styles.css"</span> title=<span class="code-quote">"Style"</span>&gt;</span>
<span class="code-tag">&lt;html&gt;</span>
<span class="code-tag">&lt;head&gt;</span><span class="code-tag">&lt;title&gt;</span>VM PAGE<span class="code-tag">&lt;/title&gt;</span><span class="code-tag">&lt;/head&gt;</span>
<span class="code-tag">&lt;body&gt;</span>
  <span class="code-tag">&lt;form&gt;</span>
#tag( Label  <span class="code-quote">"name='userlabel'"</span> <span class="code-quote">"label='user'"</span> <span class="code-quote">"theme='simple'"</span> )
#tag( TextField  <span class="code-quote">"name='user'"</span> <span class="code-quote">"theme='simple'"</span> )<span class="code-tag">&lt;br&gt;</span>

#tag( Label  <span class="code-quote">"name='emaillabel'"</span> <span class="code-quote">"label='email'"</span> <span class="code-quote">"theme='simple'"</span> )
#tag( TextField  <span class="code-quote">"name='email'"</span> <span class="code-quote">"theme='simple'"</span> )<span class="code-tag">&lt;br&gt;</span>
  <span class="code-tag">&lt;/form&gt;</span>
<span class="code-tag">&lt;/body&gt;</span>
<span class="code-tag">&lt;/html&gt;</span></pre>
</div></div>

<h3><a name="Themes-Creatingyourowntheme">Creating your own theme <a name="Themes-custom"></a></a></h3>

<p>Creating  themes is quite simple and can save valuable time enabling you to minimize UI code when it comes to creating complex UI pages.  It is recommended you understand webwork templates before you continue (see <a href="Templates.html" title="Templates">Templates</a>).  The steps required to use a theme.</p>
<ol>
	<li>Define a name for your theme by creating a subdirectory under /template directory.  The name of the subdirectory you create will be the same as the value you specify in your UI tag theme attribute.
<div class="code"><div class="codeContent">
<pre class="code-java">/template/myTheme</pre>
</div></div>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;ui:textfield label=<span class="code-quote">"'foo'"</span> name=<span class="code-quote">"'bar'"</span> theme=<span class="code-quote">"'myTheme'"</span> /&gt;</span></pre>
</div></div></li>
	<li>Create a velocity template for every UI tag that you want to use with your theme.  For example, if you have forms with only textfields and nothing else, then all you need in your subdirectory is a text.vm template.  Note: if you create a text.vm and reference another template with the parse tag, then you must make sure these templates are defined as well(ex. controlheader.vm).</li>
	<li>If you want your new theme to be the default so you don't have to specify the theme attribute every time in the UI tag, then modify the webwork.ui.theme value in your webwork.properties file.  Otherwise, you can just specify the theme attribute in all your UI tags.</li>
</ol>



<p>As a good starting point, a good idea is to copy the contents of xhtml into a new subdirectory.  Therefore, you can modify the templates and still refer back to the originals as a reference point.</p>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

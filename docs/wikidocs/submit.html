<html>
    <head>
        <title>WebWork - 
        submit
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <p>The submit tag is used together with the <a href="form.html" title="form">form</a> tag to provide asynchronous form submissions.</p>

<div class="information-block" align='center'><div class='informationMacroPadding'><table cellpadding='5' width='85%' cellspacing='0' class='noteMacro' border='0'><tr><td width='16' valign='top'><img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Be sure to setup the page containing this tag to be <a href="Configured for AJAX.html" title="Configured for AJAX">Configured for AJAX</a> </td></tr></table></div></div>	

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'>	Attribute	</th>
<th class='confluenceTh'>	Type	</th>
<th class='confluenceTh'>	Required	</th>
<th class='confluenceTh'>	Default	</th>
<th class='confluenceTh'>	Description	</th>
</tr>
<tr>
<td class='confluenceTd'>	resultDivId	</td>
<td class='confluenceTd'>	string	</td>
<td class='confluenceTd'>	TRUE	</td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>	The id of the HTML element to place the result (this can the the form's id or any id on the page	</td>
</tr>
<tr>
<td class='confluenceTd'>	notifyTopics	</td>
<td class='confluenceTd'>	string	</td>
<td class='confluenceTd'>	FALSE	</td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>	Topic names to post an event to after the form has been submitted	</td>
</tr>
<tr>
<td class='confluenceTd'>	onLoadJS	</td>
<td class='confluenceTd'>	string	</td>
<td class='confluenceTd'>	FALSE	</td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'>	Javascript code that will be executed after the form has been submitted. The format is onLoadJS='yourMethodName(data,type)'. NOTE: the words data and type must be left like that if you want the event type and the returned data.	</td>
</tr>
</table>


<p>The remote form has three basic modes of use, using the resultDivId, the notifyTopics, or the onLoadJS. You can mix and match any combination of them to get your desired result.  All of these examples are contained in the Ajax example webapp. Lets go through some scenarios to see how you might use it:</p>
<ul>
	<li>Show the results in another div.  If you want your results to be shown in a div, us the resultDivId where the id is the id of the div you want them shown in.  This is an inner HTML approah. Your results get jammed into the div for you.  Here is a sample of this approach:
<div class="code"><div class="codeContent">
<pre class="code-java">Remote form replacing another div:
&lt;div id='two' style=<span class="code-quote">"border: 1px solid yellow;"</span>&gt;Initial content&lt;/div&gt;
&lt;ww:form
        id='theForm2'
        cssStyle=<span class="code-quote">"border: 1px solid green;"</span>
        action='/AjaxRemoteForm.action'
        method='post'
        theme=<span class="code-quote">"ajax"</span>&gt;

    &lt;input type='text' name='data' value='WebWork User'&gt;
    &lt;ww:submit value=<span class="code-quote">"GO2"</span> theme=<span class="code-quote">"ajax"</span> resultDivId=<span class="code-quote">"two"</span>/&gt;

&lt;/ww:form&gt;</pre>
</div></div></li>
	<li>Notify other controls(divs) of a change. Using an pub-sub model you can notify others that your control changed and they can take the appropriate action. Most likely they will execute some action to refresh.  The notifyTopics does this for you. You can have many topic names in a comma delimited list. IE: notifyTopics="newPerson, dataChanged"  .<br/>
Here is an example of this approach:
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;ww:form id=<span class="code-quote">"frm1"</span> action=<span class="code-quote">"newPersonWithXMLResult"</span> theme=<span class="code-quote">"ajax"</span>  &gt;
      &lt;ww:textfield label=<span class="code-quote">"'Name'"</span> name=<span class="code-quote">"'person.name'"</span> value=<span class="code-quote">"person.name"</span> size=<span class="code-quote">"20"</span> required=<span class="code-quote">"<span class="code-keyword">true</span>"</span> /&gt;
      &lt;ww:submit id=<span class="code-quote">"submitBtn"</span> value=<span class="code-quote">"Save"</span> theme=<span class="code-quote">"ajax"</span>  cssClass=<span class="code-quote">"primary"</span>  notifyTopics=<span class="code-quote">"personUpdated, systemWorking"</span> /&gt;
  &lt;/ww:form&gt;
  
  &lt;ww:div href=<span class="code-quote">"/listPeople.action"</span> theme=<span class="code-quote">"ajax"</span> errorText=<span class="code-quote">"error opps"</span>
          loadingText=<span class="code-quote">"loading..."</span> id=<span class="code-quote">"cart-body"</span> &gt;
      &lt;ww:action namespace=<span class="code-quote">"" name="</span>listPeople<span class="code-quote">" executeResult="</span><span class="code-keyword">true</span>" /&gt;
  &lt;/ww:div&gt;</pre>
</div></div></li>
	<li>Massage the results with JavaScript. Say that your result returns some happy XML and you want to parse it and do lots of cool things with it.  The way to do this is with a onLoadJS handler.  Here you provide the name of a JavaScript function to be called back with the result and the event type.  The only key is that you must use the variable names 'data' and 'type' when defining the callback.  For example: onLoadJS="myFancyDancyFunction(data, type)".  While I talked about XML in this example, your not limited to XML, the data in the callback will be exactly whats returned as your result.<br/>
Here is an example of this approach:
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;script language=<span class="code-quote">"JavaScript"</span> type=<span class="code-quote">"text/javascript"</span>&gt;
      function doGreatThings(data, type) {
          <span class="code-comment">//Do whatever with your returned fragment... 
</span>          <span class="code-comment">//Perhapps.... <span class="code-keyword">if</span> xml...
</span>                <span class="code-keyword">var</span> xml = dojo.xml.domUtil.createDocumentFromText(data);
                <span class="code-keyword">var</span> people = xml.getElementsByTagName(<span class="code-quote">"person"</span>);
                <span class="code-keyword">for</span>(<span class="code-keyword">var</span> i = 0;i &lt; people.length; i ++){
                    <span class="code-keyword">var</span> person = people[i];
                    <span class="code-keyword">var</span> name = person.getAttribute(<span class="code-quote">"name"</span>)
                    <span class="code-keyword">var</span> id = person.getAttribute(<span class="code-quote">"id"</span>)
                    alert('Thanks dude. Person: ' + name + ' saved great!!!');
                }

      }
  &lt;/script&gt;

  &lt;ww:form id=<span class="code-quote">"frm1"</span> action=<span class="code-quote">"newPersonWithXMLResult"</span> theme=<span class="code-quote">"ajax"</span>  &gt;
      &lt;ww:textfield label=<span class="code-quote">"'Name'"</span> name=<span class="code-quote">"'person.name'"</span> value=<span class="code-quote">"person.name"</span> size=<span class="code-quote">"20"</span> required=<span class="code-quote">"<span class="code-keyword">true</span>"</span> /&gt;
      &lt;ww:submit id=<span class="code-quote">"submitBtn"</span> value=<span class="code-quote">"Save"</span> theme=<span class="code-quote">"ajax"</span>  cssClass=<span class="code-quote">"primary"</span>  onLoadJS=<span class="code-quote">"doGreatThings(data, type)"</span> /&gt;
  &lt;/ww:form&gt;</pre>
</div></div></li>
</ul>


                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

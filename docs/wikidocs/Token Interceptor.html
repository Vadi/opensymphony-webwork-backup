<html>
    <head>
        <title>WebWork - 
        Token Interceptor
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    
<p> Ensures that only one request per token is processed. This interceptor can make sure that back buttons and double
 clicks don't cause un-intended side affects. For example, you can use this to prevent careless users who might double
 click on a "checkout" button at an online store. This interceptor uses a fairly primitive technique for when an
 invalid token is found: it returns the result <b>invalid.token</b>, which can be mapped in your action configuration.
 A more complex implementation, TokenSessionStoreInterceptor, can provide much better logic for when invalid
 tokens are found.</p>

<p> <p/></p>

<p> <b>Note:</b> To set a token in your form, you should use the <b>token tag</b>. This tag is required and must be used
 in the forms that submit to actions protected by this interceptor. Any request that does not provide a token (using
 the token tag) will be processed as a request with an invalid token.</p>

<p> <p/></p>

<p> <b>Internationalization Note:</b> The following key could be used to internationalized the action errors generated
 by this token interceptor</p>

<p> <ul>
    <li>webwork.messages.invalid.token</li>
 </ul></p>

<p> <p/></p>

<p> <b>NOTE:</b> As this method extends off MethodFilterInterceptor, it is capable of
 deciding if it is applicable only to selective methods in the action class. See
 <code>MethodFilterInterceptor</code> for more info.</p>


<h1><a name="TokenInterceptor-Parameters"></a>Parameters</h1>


<p> <ul></p>

<p> <li>None</li></p>

<p> </ul></p>


<h1><a name="TokenInterceptor-ExtendingtheInterceptor"></a>Extending the Interceptor</h1>


<p> While not very common for users to extend, this interceptor is extended by the TokenSessionStoreInterceptor.
 The #handleInvalidToken  and #handleValidToken methods are protected and available for more
 interesting logic, such as done with the token session interceptor.</p>


<h1><a name="TokenInterceptor-Examples"></a>Examples</h1>

<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;action name=<span class="code-quote">"someAction"</span> class=<span class="code-quote">"com.examples.SomeAction"</span>&gt;</span>
    <span class="code-tag">&lt;interceptor-ref name=<span class="code-quote">"token"</span>/&gt;</span>
    <span class="code-tag">&lt;interceptor-ref name=<span class="code-quote">"basicStack"</span>/&gt;</span>
    <span class="code-tag">&lt;result name=<span class="code-quote">"success"</span>&gt;</span>good_result.ftl<span class="code-tag">&lt;/result&gt;</span>
<span class="code-tag">&lt;/action&gt;</span>

&lt;-- In this case, myMethod of the action class will not 
       get checked for invalidity of token --&gt;
<span class="code-tag">&lt;action name=<span class="code-quote">"someAction"</span> class=<span class="code-quote">"com.examples.SomeAction"</span>&gt;</span>
    <span class="code-tag">&lt;interceptor-ref name=<span class="code-quote">"token"</span>&gt;</span>
    	  <span class="code-tag">&lt;param name=<span class="code-quote">"excludeMethods"</span>&gt;</span>myMethod<span class="code-tag">&lt;/param&gt;</span>
    <span class="code-tag">&lt;/interceptor-ref name=<span class="code-quote">"token"</span>/&gt;</span>
    <span class="code-tag">&lt;interceptor-ref name=<span class="code-quote">"basicStack"</span>/&gt;</span>
    <span class="code-tag">&lt;result name=<span class="code-quote">"success"</span>&gt;</span>good_result.ftl<span class="code-tag">&lt;/result&gt;</span>
<span class="code-tag">&lt;/action&gt;</span></pre>
</div></div>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

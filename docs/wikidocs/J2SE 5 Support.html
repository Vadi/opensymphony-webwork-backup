<html>
    <head>
        <title>WebWork - 
         5 Support
        </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <p>Currently only in beta-status, an <b>xwork-tiger</b> project exists that is starting to add some basic J2SE 5 ("Tiger") support to WebWork. Currently, the only Java 5 implementation in xwork-tiger.jar is a Map and Collection support using generics. </p>

<p>In short, instead of specifying the types found in collections and maps as documented in <a href="Type Conversion.html" title="Type Conversion">Type Conversion</a>, <b>the  collection's generic type is used</b>. This means you most likely don't need any <b>ClassName-conversion.properties</b> files.</p>

<div class="information-block" align='center'><div class='informationMacroPadding'><table cellpadding='5' width='85%' cellspacing='0' class='infoMacro' border='0'><tr><td width='16' valign='top'><img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Work in progress</b><br />
<p>This is a work in progress and not yet finished! More complex examples will follow. For now, have a look at the unit tests within the xwork-tiger project path.</p></td></tr></table></div></div>

<h1><a name="J2SE5Support-CreateXXXconversion.propertiesvia%22antapt%22target">Create XXX-conversion.properties via "<b>ant apt</b>" target</a></h1>

<p>This is an example for the apt ant target:</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;target name=<span class="code-quote">"apt"</span>&gt;</span>
        <span class="code-tag">&lt;mkdir dir=<span class="code-quote">"${build}/generated"</span>/&gt;</span>

        <span class="code-tag">&lt;path id=<span class="code-quote">"classpath"</span>&gt;</span>
            <span class="code-tag">&lt;pathelement path=<span class="code-quote">"${basedir}/build/java"</span>/&gt;</span>
            <span class="code-tag">&lt;pathelement path=<span class="code-quote">"${basedir}/build/test"</span>/&gt;</span>
            <span class="code-tag"><span class="code-comment">&lt;!-- xwork.jar and xwork-tiger.jar must be in one of the following lib dirs --&gt;</span></span>
            <span class="code-tag">&lt;fileset dir=<span class="code-quote">"${basedir}/lib/build"</span> includes=<span class="code-quote">"*.jar"</span>/&gt;</span>
            <span class="code-tag">&lt;fileset dir=<span class="code-quote">"${basedir}/lib/default"</span> includes=<span class="code-quote">"*.jar"</span>/&gt;</span>
            <span class="code-tag">&lt;fileset dir=<span class="code-quote">"${basedir}/lib/spring"</span> includes=<span class="code-quote">"*.jar"</span>/&gt;</span>
        <span class="code-tag">&lt;/path&gt;</span>

        <span class="code-tag">&lt;property name=<span class="code-quote">"pclasspath"</span> refid=<span class="code-quote">"classpath"</span>/&gt;</span>

        <span class="code-tag"><span class="code-comment">&lt;!-- Change the includes attribute value to match your annotated java files --&gt;</span></span>
        <span class="code-tag">&lt;fileset id=<span class="code-quote">"sources"</span> dir=<span class="code-quote">"."</span> includes=<span class="code-quote">"src/test/**/*.java"</span> /&gt;</span>

        <span class="code-tag">&lt;pathconvert pathsep=<span class="code-quote">" "</span> property=<span class="code-quote">"sourcefiles"</span> refid=<span class="code-quote">"sources"</span>/&gt;</span>

        <span class="code-tag">&lt;echo&gt;</span>

            CLASSPATH ${pclasspath}

            SOURCES: ${sourcefiles}

        <span class="code-tag">&lt;/echo&gt;</span>

        <span class="code-tag">&lt;exec executable=<span class="code-quote">"apt"</span> &gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"-s"</span>/&gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"${build}/generated"</span>/&gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"-classpath"</span>/&gt;</span>
            <span class="code-tag">&lt;arg pathref=<span class="code-quote">"classpath"</span>/&gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"-nocompile"</span>/&gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"-factory"</span>/&gt;</span>
            <span class="code-tag">&lt;arg value=<span class="code-quote">"com.opensymphony.xwork.apt.XWorkProcessorFactory"</span>/&gt;</span>
            <span class="code-tag">&lt;arg line=<span class="code-quote">"${sourcefiles}"</span>/&gt;</span>
        <span class="code-tag">&lt;/exec&gt;</span>
    <span class="code-tag">&lt;/target&gt;</span></pre>
</div></div>

<h1><a name="J2SE5Support-TypeConversionAnnotations">Type Conversion Annotations</a></h1>

<p>If you want to use annotation based type conversion, you have to annotate the class or interface with the Conversion Annotation.<br/>
Currently runtime evaluation for these annotations is <b>not</b> supported. This feature will be added in the near future.</p>

<p>For now you have to run the apt target via ant (TODO: not yet in CVS).</p>

<ul>
	<li><a href="#J2SE5Support-Conversion" title="Conversion on J2SE 5 Support">Conversion</a></li>
	<li><a href="#J2SE5Support-TypeConversion" title="TypeConversion on J2SE 5 Support">TypeConversion</a></li>
</ul>


<p><br clear="all" /></p>
<a name="J2SE5Support-Conversion"></a>
<h2><a name="J2SE5Support-%40Conversion">@Conversion</a></h2>

<p>The Conversion annotation must be applied at Type level.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> conversion </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Used for Type Conversions being applied at Type level.</td>
</tr>
</table>

<p><br clear="all" /></p>
<a name="J2SE5Support-TypeConversion"></a>
<h2><a name="J2SE5Support-%40TypeConversion">@TypeConversion</a></h2>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> property </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> The annotated property name </td>
<td class='confluenceTd'> The optional property name used within TYPE or PACKAGE level annotations. </td>
</tr>
<tr>
<td class='confluenceTd'> type </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> ConversionType.CLASS </td>
<td class='confluenceTd'> Enum value of ConversionType.  Determines whether the conversion should be applied at application or class level.  </td>
</tr>
<tr>
<td class='confluenceTd'> converter </td>
<td class='confluenceTd'> yes </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> The class of the TypeConverter to be used as converter. </td>
</tr>
<tr>
<td class='confluenceTd'> rule </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> ConversionRule.PROPERTY </td>
<td class='confluenceTd'> Enum value of ConversionRule. The ConversionRule can be a property, a Collection or a Map. </td>
</tr>
</table>

<p>The TypeConversion annotation can be applied at property and method level.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@Conversion()
<span class="code-keyword">public</span> class ConversionAction <span class="code-keyword">implements</span> Action {

    <span class="code-keyword">private</span> <span class="code-object">String</span> convertInt;

    <span class="code-keyword">private</span> <span class="code-object">String</span> convertDouble;

    <span class="code-keyword">private</span> List users = <span class="code-keyword">null</span>;

    <span class="code-keyword">private</span> HashMap keyValues = <span class="code-keyword">null</span>;

    @TypeConversion(type = ConversionType.APPLICATION, converter = XWorkBasicConverter.class)
    <span class="code-keyword">public</span> void setConvertInt( <span class="code-object">String</span> convertInt ) {
        <span class="code-keyword">this</span>.convertInt = convertInt;
    }

    @TypeConversion(converter = XWorkBasicConverter.class)
    <span class="code-keyword">public</span> void setConvertDouble( <span class="code-object">String</span> convertDouble ) {
        <span class="code-keyword">this</span>.convertDouble = convertDouble;
    }

    @TypeConversion(rule = ConversionRule.COLLECTION, converter = <span class="code-object">String</span>.class)
    <span class="code-keyword">public</span> void setUsers( List users ) {
        <span class="code-keyword">this</span>.users = users;
    }

    @TypeConversion(rule = ConversionRule.MAP, converter = BigInteger.class)
    <span class="code-keyword">public</span> void setKeyValues( HashMap keyValues ) {
        <span class="code-keyword">this</span>.keyValues = keyValues;
    }

    @TypeConversion(type = ConversionType.APPLICATION, property = <span class="code-quote">"java.util.Date"</span>, converter = XWorkBasicConverter.class)
    <span class="code-keyword">public</span> <span class="code-object">String</span> execute() <span class="code-keyword">throws</span> Exception {
        <span class="code-keyword">return</span> SUCCESS;
    }
}</pre>
</div></div>

<h1><a name="J2SE5Support-ValidationAnnotations">Validation Annotations</a></h1>

<p>If you want to use annotation based validation, you have to annotate the class or interface with Validation Annotation.</p>

<p>These are the standard validator annotations that come with XWork-tiger:</p>
<ul>
	<li><a href="#J2SE5Support-ConversionErrorFieldValidator" title="ConversionErrorFieldValidator on J2SE 5 Support">ConversionErrorFieldValidator</a></li>
	<li><a href="#J2SE5Support-DateRangeFieldValidator" title="DateRangeFieldValidator on J2SE 5 Support">DateRangeFieldValidator</a></li>
	<li><a href="#J2SE5Support-EmailValidator" title="EmailValidator on J2SE 5 Support">EmailValidator</a></li>
	<li><a href="#J2SE5Support-ExpressionValidator" title="ExpressionValidator on J2SE 5 Support">ExpressionValidator</a></li>
	<li><a href="#J2SE5Support-FieldExpressionValidator" title="FieldExpressionValidator on J2SE 5 Support">FieldExpressionValidator</a></li>
	<li><a href="#J2SE5Support-IntRangeFieldValidator" title="IntRangeFieldValidator on J2SE 5 Support">IntRangeFieldValidator</a></li>
	<li><a href="#J2SE5Support-RegexFieldValidator" title="RegexFieldValidator on J2SE 5 Support">RegexFieldValidator</a></li>
	<li><a href="#J2SE5Support-RequiredFieldValidator" title="RequiredFieldValidator on J2SE 5 Support">RequiredFieldValidator</a></li>
	<li><a href="#J2SE5Support-RequiredStringValidator" title="RequiredStringValidator on J2SE 5 Support">RequiredStringValidator</a></li>
	<li><a href="#J2SE5Support-StringLengthFieldValidator" title="StringLengthFieldValidator on J2SE 5 Support">StringLengthFieldValidator</a></li>
	<li><a href="#J2SE5Support-StringRegexValidator" title="StringRegexValidator on J2SE 5 Support">StringRegexValidator</a></li>
	<li><a href="#J2SE5Support-UrlValidator" title="UrlValidator on J2SE 5 Support">UrlValidator</a></li>
	<li><a href="#J2SE5Support-VisitorFieldValidator" title="VisitorFieldValidator on J2SE 5 Support">VisitorFieldValidator</a></li>
</ul>



<p><br clear="all" /></p>
<a name="J2SE5Support-Validations"></a>
<h2><a name="J2SE5Support-%40Validations">@Validations</a></h2>

<p>If you want to use several annotations of the same type, these annotation must be nested within the @Validations() annotation.</p>

<p>The possible parameters for @Validations() are as followed:</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> requiredFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of RequiredFieldValidators  </td>
</tr>
<tr>
<td class='confluenceTd'> customValidators </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of CustomValidators </td>
</tr>
<tr>
<td class='confluenceTd'> conversionErrorFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of ConversionErrorFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> dateRangeFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of DateRangeFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> emails </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of EmailValidators </td>
</tr>
<tr>
<td class='confluenceTd'> fieldExpressions </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of FieldExpressionValidators </td>
</tr>
<tr>
<td class='confluenceTd'> intRangeFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of IntRangeFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> requiredFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of RequiredFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> requiredStrings </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of RequiredStringValidators </td>
</tr>
<tr>
<td class='confluenceTd'> stringLengthFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of StringLengthFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> urls </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of UrlValidators </td>
</tr>
<tr>
<td class='confluenceTd'> visitorFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of VisitorFieldValidators </td>
</tr>
<tr>
<td class='confluenceTd'> stringRegexs </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of StringRegexValidator </td>
</tr>
<tr>
<td class='confluenceTd'> regexFields </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of RegexFieldValidator </td>
</tr>
<tr>
<td class='confluenceTd'> expressions </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> Add list of ExpressionValidator </td>
</tr>
</table>

<div class="code"><div class="codeContent">
<pre class="code-java">@Validations(
            requiredFields =
                    {@RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"customfield"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> field."</span>)},
            requiredStrings =
                    {@RequiredStringValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"stringisrequired"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> string."</span>)},
            emails =
                    { @EmailValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"emailaddress"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> email."</span>)},
            urls =
                    { @UrlValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"hreflocation"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> email."</span>)},
            stringLengthFields =
                    {@StringLengthFieldValidator(type = ValidatorType.SIMPLE, trim = <span class="code-keyword">true</span>, minLength=<span class="code-quote">"10"</span> , maxLength = <span class="code-quote">"12"</span>, fieldName = <span class="code-quote">"needstringlength"</span>, message = <span class="code-quote">"You must enter a stringlength."</span>)},
            intRangeFields =
                    { @IntRangeFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"intfield"</span>, min = <span class="code-quote">"6"</span>, max = <span class="code-quote">"10"</span>, message = <span class="code-quote">"bar must be between ${min} and ${max}, current value is ${bar}."</span>)},
            dateRangeFields =
                    {@DateRangeFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"datefield"</span>, min = <span class="code-quote">"-1"</span>, max = <span class="code-quote">"99"</span>, message = <span class="code-quote">"bar must be between ${min} and ${max}, current value is ${bar}."</span>)},
            expressions = {
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 1"</span>, message = <span class="code-quote">"Foo must be greater than Bar 1. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 2"</span>, message = <span class="code-quote">"Foo must be greater than Bar 2. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 3"</span>, message = <span class="code-quote">"Foo must be greater than Bar 3. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 4"</span>, message = <span class="code-quote">"Foo must be greater than Bar 4. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 5"</span>, message = <span class="code-quote">"Foo must be greater than Bar 5. Foo = ${foo}, Bar = ${bar}."</span>)
    }
    )
    <span class="code-keyword">public</span> <span class="code-object">String</span> execute() <span class="code-keyword">throws</span> Exception {
        <span class="code-keyword">return</span> SUCCESS;
    }</pre>
</div></div>

<p><br clear="all" /></p>
<a name="J2SE5Support-RequiredFieldValidator"></a>
<h2><a name="J2SE5Support-%40RequiredFieldValidator">@RequiredFieldValidator</a></h2>

<p>This validator checks that a field is non-null.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@RequiredFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>)</pre>
</div></div>

<p><br clear="all" /></p>
<a name="J2SE5Support-RequiredStringValidator"></a>
<h2><a name="J2SE5Support-%40RequiredStringValidator">@RequiredStringValidator</a></h2>

<p>This validator checks that a String field is not empty (i.e. non-null with a length &gt; 0).  </p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> trim </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> true </td>
<td class='confluenceTd'> Boolean property.  Determines whether the String is trimmed before performing the length check.  </td>
</tr>
</table>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@RequiredStringValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, trim = <span class="code-keyword">true</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-StringLengthFieldValidator"></a>
<h2><a name="J2SE5Support-%40StringLengthFieldValidator">@StringLengthFieldValidator</a></h2>

<p>This validator checks that a String field is of the right length.  It assumes that the field is a String.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> trim </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> true </td>
<td class='confluenceTd'> Boolean property.  Determines whether the String is trimmed before performing the length check.  </td>
</tr>
<tr>
<td class='confluenceTd'> minLength </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Integer property.  The minimum length the String must be. </td>
</tr>
<tr>
<td class='confluenceTd'> maxLength </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Integer property.  The maximum length the String can be. </td>
</tr>
</table>

<p>If neither <em>minLength</em> nor <em>maxLength</em> is set, nothing will be done.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@StringLengthFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, trim = <span class="code-keyword">true</span>, minLength = <span class="code-quote">"5"</span>,  maxLength = <span class="code-quote">"12"</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-StringRegexValidator"></a>
<h2><a name="J2SE5Support-%40StringRegexValidator">@StringRegexValidator</a></h2>

<p>This validator checks that a String field matches a configure Regular Expression, if it is not an empty String.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> regex</td>
<td class='confluenceTd'> yes </td>
<td class='confluenceTd'> "." </td>
<td class='confluenceTd'> String property.  The Regular Expression for which to check a match.  </td>
</tr>
<tr>
<td class='confluenceTd'> caseSensitive</td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> true </td>
<td class='confluenceTd'> Whether the matching of alpha characters in the expression should be done case-sensitively. </td>
</tr>
</table>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@StringRegexValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, regex = <span class="code-quote">"a regular expression"</span>, caseSensitive = <span class="code-keyword">true</span>)</pre>
</div></div>

<p><br clear="all" /></p>
<a name="J2SE5Support-EmailValidator"></a>
<h2><a name="J2SE5Support-%40EmailValidator">@EmailValidator</a></h2>

<p>This validator checks that a field is a valid e-mail address if it contains a non-empty String.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@EmailValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-UrlValidator"></a>
<h2><a name="J2SE5Support-%40UrlValidator">@UrlValidator</a></h2>

<p>This validator checks that a field is a valid URL.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@UrlValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-IntRangeFieldValidator"></a>
<h2><a name="J2SE5Support-%40IntRangeFieldValidator">@IntRangeFieldValidator</a></h2>

<p>This validator checks that a numeric field has a value within a specified range.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> min </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Integer property.  The minimum the number must be. </td>
</tr>
<tr>
<td class='confluenceTd'> max </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Integer property.  The maximum number can be. </td>
</tr>
</table>

<p>If neither <em>min</em> nor <em>max</em> is set, nothing will be done.</p>

<p>The values for min and max must be inserted as String values so that "0" can be handled as a possible value.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@IntRangeFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, min = <span class="code-quote">"0"</span>, max = <span class="code-quote">"42"</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-DateRangeFieldValidator"></a>
<h2><a name="J2SE5Support-%40DateRangeFieldValidator">@DateRangeFieldValidator</a></h2>

<p>This validator checks that a date field has a value within a specified range.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> min </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Date property.  The minimum the date must be. </td>
</tr>
<tr>
<td class='confluenceTd'> max </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Date property.  The maximum date can be. </td>
</tr>
</table>

<p>If neither <em>min</em> nor <em>max</em> is set, nothing will be done.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@DateRangeFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, min = <span class="code-quote">"2005/01/01"</span>, max = <span class="code-quote">"2005/12/31"</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-ConversionErrorFieldValidator"></a>
<h2><a name="J2SE5Support-%40ConversionErrorFieldValidator">@ConversionErrorFieldValidator</a></h2>

<p>This validator checks if there are any conversion errors for a field and applies them if they exist.  See Type Conversion Error Handling for details.</p>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@ConversionErrorFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-ExpressionValidator"></a>
<h2><a name="J2SE5Support-%40ExpressionValidator">@ExpressionValidator</a></h2>

<p>This validator uses an <a href="OGNL.html" title="OGNL">OGNL</a> expression to perform its validation.  The error message will be added to the <b>action</b> if the expression returns false when it is evaluated against the value stack.</p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> expression </td>
<td class='confluenceTd'> yes </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> An OGNL expression that returns a boolean value.  </td>
</tr>
</table>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@ExpressionValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, expression = <span class="code-quote">"an OGNL expression"</span> )</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-FieldExpressionValidator"></a>
<h2><a name="J2SE5Support-%40FieldExpressionValidator">@FieldExpressionValidator</a></h2>

<p>This validator uses an <a href="OGNL.html" title="OGNL">OGNL</a> expression to perform its validation.  The error message will be added to the <b>field</b> if the expression returns false when it is evaluated against the value stack. </p>

<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> expression </td>
<td class='confluenceTd'> yes </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> An OGNL expression that returns a boolean value.  </td>
</tr>
</table>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@FieldExpressionValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, expression = <span class="code-quote">"an OGNL expression"</span>)</pre>
</div></div>


<p><br clear="all" /></p>
<a name="J2SE5Support-VisitorFieldValidator"></a>
<h2><a name="J2SE5Support-%40VisitorFieldValidator">@VisitorFieldValidator</a></h2>

<p>The validator allows you to forward validation to object properties of your action using the objects own validation files. This allows you to use the ModelDriven development pattern and manage your validations for your models in one place, where they belong, next to your model classes. The VisitorFieldValidator can handle either simple Object properties, Collections of Objects, or Arrays.</p>

<p>The error message for the VisitorFieldValidator will be appended in front of validation messages added by the validations for the Object message.</p>


<table class='confluenceTable'>
<tr>
<th class='confluenceTh'> Parameter </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
<th class='confluenceTh'> Notes </th>
</tr>
<tr>
<td class='confluenceTd'> context </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> action alias </td>
<td class='confluenceTd'> Determines the context to use for validating the Object property. If not defined, the context of the Action validation is propogated to the Object property validation.  In the case of Action validation, this context is the Action alias.  </td>
</tr>
<tr>
<td class='confluenceTd'> appendPrefix </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> true </td>
<td class='confluenceTd'> Determines whether the field name of this field validator should be prepended to the field name of the visited field to determine the full field name when an error occurs.  For example, suppose that the bean being validated has a "name" property.  If <em>appendPrefix</em> is true, then the field error will be stored under the field "bean.name".  If <em>appendPrefix</em> is false, then the field error will be stored under the field "name".  <br clear="all" /> <img class="emoticon" src="./icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> If you are using the VisitorFieldValidator to validate the model from a ModelDriven Action, you should set <em>appendPrefix</em> to false unless you are using "model.name" to reference the properties on your model. </td>
</tr>
</table>

<p>Example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@VisitorFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, context = <span class="code-quote">"action alias"</span>, appendPrefix = <span class="code-keyword">true</span>)</pre>
</div></div>

<p>Here we see the <em>context</em> being overridden in the validator mapping, so the action alias context will not be propogated.</p>

<p>ModelDriven example:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">@VisitorFieldValidator(message = <span class="code-quote">"Default message"</span>, key = <span class="code-quote">"i18n.key"</span>, shortCircuit = <span class="code-keyword">true</span>, context = <span class="code-quote">"action alias"</span>, appendPrefix = <span class="code-keyword">true</span>)</pre>
</div></div>

<p>This will use the model's validation rules and any errors messages will be applied directly (nothing is prefixed because of the empty message).</p>

<h2><a name="J2SE5Support-MoreComplexExamples">More Complex Examples</a></h2>

<h3><a name="J2SE5Support-AnAnnotatedInterface">An Annotated Interface</a></h3>

<ul>
	<li>Mark the interface with @Validation()</li>
	<li>Apply standard or custom annoations at method level</li>
</ul>


<div class="code"><div class="codeContent">
<pre class="code-java">@Validation()
<span class="code-keyword">public</span> <span class="code-keyword">interface</span> AnnotationDataAware {

    void setBarObj(Bar b);

    Bar getBarObj();

    @RequiredFieldValidator(message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> data."</span>)
    @RequiredStringValidator(message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> data."</span>)
    void setData(<span class="code-object">String</span> data);

    <span class="code-object">String</span> getData();
}</pre>
</div></div>

<h3><a name="J2SE5Support-AnAnnotatedClass">An Annotated Class</a></h3>

<div class="code"><div class="codeContent">
<pre class="code-java">@Validation()
<span class="code-keyword">public</span> class SimpleAnnotationAction <span class="code-keyword">extends</span> ActionSupport {

    @RequiredFieldValidator(type = ValidatorType.FIELD, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> bar."</span>)
    @IntRangeFieldValidator(type = ValidatorType.FIELD, min = <span class="code-quote">"6"</span>, max = <span class="code-quote">"10"</span>, message = <span class="code-quote">"bar must be between ${min} and ${max}, current value is ${bar}."</span>)
    <span class="code-keyword">public</span> void setBar(<span class="code-object">int</span> bar) {
        <span class="code-keyword">this</span>.bar = bar;
    }

    <span class="code-keyword">public</span> <span class="code-object">int</span> getBar() {
        <span class="code-keyword">return</span> bar;
    }

    @Validations(
            requiredFields =
                    {@RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"customfield"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> field."</span>)},
            requiredStrings =
                    {@RequiredStringValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"stringisrequired"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> string."</span>)},
            emails =
                    { @EmailValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"emailaddress"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> email."</span>)},
            urls =
                    { @UrlValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"hreflocation"</span>, message = <span class="code-quote">"You must enter a value <span class="code-keyword">for</span> email."</span>)},
            stringLengthFields =
                    {@StringLengthFieldValidator(type = ValidatorType.SIMPLE, trim = <span class="code-keyword">true</span>, minLength=<span class="code-quote">"10"</span> , maxLength = <span class="code-quote">"12"</span>, fieldName = <span class="code-quote">"needstringlength"</span>, message = <span class="code-quote">"You must enter a stringlength."</span>)},
            intRangeFields =
                    { @IntRangeFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"intfield"</span>, min = <span class="code-quote">"6"</span>, max = <span class="code-quote">"10"</span>, message = <span class="code-quote">"bar must be between ${min} and ${max}, current value is ${bar}."</span>)},
            dateRangeFields =
                    {@DateRangeFieldValidator(type = ValidatorType.SIMPLE, fieldName = <span class="code-quote">"datefield"</span>, min = <span class="code-quote">"-1"</span>, max = <span class="code-quote">"99"</span>, message = <span class="code-quote">"bar must be between ${min} and ${max}, current value is ${bar}."</span>)},
            expressions = {
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 1"</span>, message = <span class="code-quote">"Foo must be greater than Bar 1. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 2"</span>, message = <span class="code-quote">"Foo must be greater than Bar 2. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 3"</span>, message = <span class="code-quote">"Foo must be greater than Bar 3. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 4"</span>, message = <span class="code-quote">"Foo must be greater than Bar 4. Foo = ${foo}, Bar = ${bar}."</span>),
                @ExpressionValidator(expression = <span class="code-quote">"foo &amp;gt; 5"</span>, message = <span class="code-quote">"Foo must be greater than Bar 5. Foo = ${foo}, Bar = ${bar}."</span>)
    }
    )
    <span class="code-keyword">public</span> <span class="code-object">String</span> execute() <span class="code-keyword">throws</span> Exception {
        <span class="code-keyword">return</span> SUCCESS;
    }
}</pre>
</div></div>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

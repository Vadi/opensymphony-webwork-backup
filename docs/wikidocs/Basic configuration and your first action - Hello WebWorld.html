<html>
    <head>
        <title>WebWork - 
        Basic configuration and your first action - Hello WebWorld
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <h3><a name="Basicconfigurationandyourfirstaction-HelloWebWorld-YourfirstactionHelloWebWorld"></a>Your first action - Hello WebWorld</h3>

<p>An action is a piece of code that is executed when a particular URL is requested. After actions are executed, a result visually displays the outcome of whatever code was executed in the action. A result is generally an HTML page, but it can also be a PDF file, an Excel spreadsheet, or even a Java applet window. In this book, we'll primarily focus on HTML results, because those are most specific to the Web.</p>

<p>When you submit an html form using WebWork, the form is sent to a Java class that you write yourself, not to a JSP page. These classes are called WebWork actions. The html form&nbsp; typically looks like: &lt;form action="foo.action"&gt;.</p>

<p>In a Model-View-Controller approach, the WebWork action is part of the Controller, leaving to JSP pages what they do best: the View. (If you don't know what a Model-View-Controller is, don't worry about this.)</p>

<p>Suppose you want to create a simple "Hello, World" example in which a message is displayed whenever a user goes to a URL such as <a href="http://localhost/helloWorld.action" title="Visit page outside Confluence">&#104;ttp://localhost/helloWorld.action</a>. Because you've mapped WebWork's servlet to &#42;.action, you need an action named helloWorld. To create the "Hello, World" example, you need to do three things:</p>
<ol>
	<li>Create an action class: HelloWorld.</li>
	<li>Create a result: hello.jsp.</li>
	<li>Configure the action and result.</li>
</ol>


<h3><a name="Basicconfigurationandyourfirstaction-HelloWebWorld-TheCode"></a>The Code</h3>

<div class="code" style="border-style: solid; "><div class="codeHeader" style="border-bottom-style: solid; "><b>HelloWorld.java</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">package</span> example.helloworld;
<span class="code-keyword">import</span> com.opensymphony.xwork.Action;
<span class="code-keyword">import</span> java.util.*;

<span class="code-keyword">public</span> class HelloWorld <span class="code-keyword">implements</span> Action {
<span class="code-keyword">private</span> <span class="code-object">String</span> message;

 <span class="code-keyword">public</span> <span class="code-object">String</span> execute() {
   message = <span class="code-quote">"Hello, WebWorld!\n"</span>;
   message += <span class="code-quote">"The time is:\n"</span>;
   message += DateFormat.getDateInstance().format(<span class="code-keyword">new</span> Date());;

   <span class="code-keyword">return</span> SUCCESS;
 }

 <span class="code-keyword">public</span> <span class="code-object">String</span> getMessage() {
   <span class="code-keyword">return</span> message;
 }

}</pre>
</div></div>
<p>&nbsp;</p>

<p>Paste this code into a file webapp/hello.jsp:</p>
<div class="code" style="border-style: solid; "><div class="codeHeader" style="border-bottom-style: solid; "><b>hello.jsp</b></div><div class="codeContent">
<pre class="code-java">&lt;%@ taglib prefix=<span class="code-quote">"ww"</span> uri=<span class="code-quote">"webwork"</span> %&gt;
 &lt;html&gt;
   &lt;head&gt;
    &lt;title&gt;Hello Page&lt;/title&gt;
   &lt;/head&gt;
  &lt;body&gt;
    The message generated by my first action is:
    &lt;ww:property value=<span class="code-quote">"message"</span>/&gt;
  &lt;/body&gt;
 &lt;/html&gt;</pre>
</div></div>
<p>&nbsp;</p>

<p>Edit the xwork.xml file as shown below, adding the helloWorld action and something called an interceptor to the default package. Read more: <a href="xwork.xml.html" title="xwork.xml">xwork.xml</a></p>
<div class="code" style="border-style: solid; "><div class="codeHeader" style="border-bottom-style: solid; "><b>xwork.xml</b></div><div class="codeContent">
<pre class="code-java">&lt;!DOCTYPE xwork PUBLIC <span class="code-quote">"-<span class="code-comment">//OpenSymphony Group//XWork 1.0//EN"</span> <span class="code-quote">"http://www.opensymphony.com/xwork/xwork-1.0.dtd"</span>&gt;
</span>  &lt;xwork&gt;
   &lt;include file=<span class="code-quote">"webwork-<span class="code-keyword">default</span>.xml"</span>/&gt;

   &lt;<span class="code-keyword">package</span> name=<span class="code-quote">"<span class="code-keyword">default</span>"</span> <span class="code-keyword">extends</span>=<span class="code-quote">"webwork-<span class="code-keyword">default</span>"</span>&gt;
     &lt;!-- Include webwork defaults (from WebWork JAR). --&gt;
     &lt;<span class="code-keyword">default</span>-interceptor-ref name=<span class="code-quote">"completeStack"</span>/&gt;

      &lt;action name=<span class="code-quote">"helloWorld"</span>
         class=<span class="code-quote">"example.helloworld.HelloWorld"</span>&gt;
         &lt;result name=<span class="code-quote">"success"</span>&gt;hello.jsp&lt;/result&gt;
      &lt;/action&gt;
   &lt;/<span class="code-keyword">package</span>&gt;
  &lt;/xwork&gt;</pre>
</div></div>
<p>&nbsp;<table cellpadding='5' width='85%' cellspacing='8px' class='warningMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Don't forget</b><br /><br/>
Compile your action to webapp/WEB-INF/classes, and to restart your web application if necessary.</td></tr></table><br/>
&nbsp;</p>

<p>Go ahead and try it now: go to the url <a href="http://localhost/helloWorld.action" title="Visit page outside Confluence">&#104;ttp://localhost/helloWorld.action</a> and see what happens. You should see a page that says "Hello, WebWorld&#33;".</p>

<h3><a name="Basicconfigurationandyourfirstaction-HelloWebWorld-Howthecodeworks"></a>How the code works</h3>

<p>The above four files work together like this.</p>
<ul>
	<li>Your browser requests the url <a href="http://localhost/helloWorld.action" title="Visit page outside Confluence">&#104;ttp://localhost/helloWorld.action</a>, sending it to your web application server.</li>
	<li>The server receives the request for helloWorld.action. Looking in <a href="web.xml.html" title="web.xml">webapp/WEB-INF/web.xml</a>, it sees that all &#42;.action (the default mapping) requests are to be handed off to com.opensymphony.webwork.dispatcher.FilterDispatcher. Essentially, the request is handed to WebWork now.</li>
	<li>WebWork looks in xwork.xml for an action named "helloWorld". There it finds that this corresponds to the class "HelloWorld," instantiates it, and calls its execute() method.</li>
	<li>execute() returns SUCCESS, and WebWork looks again in xwork.xml to see what page to load if SUCCESS is returned. It finds the page "hello.jsp".</li>
	<li>The page hello.jsp is processed (the &lt;ww:property value="message" /&gt; tag calls the getter getMessage() of HelloWorld.java) and sent back to the browser.</li>
</ul>


<p>In conclusion, with WebWork, all html forms are sent to an action. This action returns a constant result-name such as SUCCESS, ERROR or INPUT. Based on the <a href="xwork.xml.html" title="xwork.xml">xwork.xml</a>, a given result-name may produce a page (as in this example), another action, or some other web resource (image, pdf). In this example, the form contained no data.</p>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

<html>
    <head>
        <title>WebWork - 
         Vault
        </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <h2><a name="TheVault-TheVault">The Vault</a></h2>

<h3><a name="TheVault-Whatisthevault%3F">What is the vault ?</a></h3>

<p>The vault contains lots of unsorted problems, snippets, remarks and ideas, mostly found in posts in the <a href="http://forums.opensymphony.com/category.jspa?categoryID=5" title="Visit page outside Confluence">WebWork Forum</a>. You can think of this page as a place to store content before it is analyzed and put in the official docs, cookbook or FAQ. It's raw, unpolished, and can contain typos. If you can't find it in the docs, you can take a look in here (or use the search in the forum). It also gives an idea of what problems ww users encounter in their search for the holy grail.</p>

<p>Feel free to 'take' issues from this page and move them to an appropriate page.</p>

<div class="information-block" align='center'><div class='informationMacroPadding'><table cellpadding='5' width='85%' cellspacing='0' class='noteMacro' border='0'><tr><td width='16' valign='top'><img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Under construction</b><br />Tryout - if this is a bad idea, feel free to tell me so. It would be great if we could have some sort of notifier in the forum to inform us when an interesting post arrives.</td></tr></table></div></div>

<h2><a name="TheVault-Migrationto2.2">Migration to 2.2</a></h2>

<h4><a name="TheVault-NoteaboutupgradingyourWWtagsto2.2">Note about upgrading your WW tags to 2.2</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=13870&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=13870&amp;tstart=0</a></li>
</ul>


<p>Just a quick fyi that caused issues for us... In 2.2 when extending UIBean evaluateExtraParams() no longer takes parameters. (Our parameters were not working until we realized that evaluateExtraParams was not being invoked due to the change.) In 2.1 evaluateExtraParams was passed the stack IIRC.</p>

<p>Not sure if this is documented anywhere but it caused us quite a headache when migrating from 2.1 to 2.2.</p>

<h4><a name="TheVault-Wheredidthevelocitytemplatesgo%3F">Where did the velocity templates go ?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=13108&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=13108&amp;tstart=0</a></li>
</ul>


<p>checking cvs log, it seems that Pat has removed it with comment as follows:</p>

<p>removing velocity macro implementations - they are so old and out of date now it will cause more harm than good keeping them around</p>

<h2><a name="TheVault-Bestpractices">Best practices</a></h2>

<h4><a name="TheVault-ShouldImakeanactionorratherlinktoa.jsppage%3F">Should I make an action or rather link to a .jsp page ?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14424&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14424&amp;tstart=0</a></li>
</ul>


<p>If you put an action configuration in your xwork.xml but don't put an action<br/>
class attribute, it will default to using the ActionSupport class, which<br/>
just returns SUCCESS.</p>

<h2><a name="TheVault-Typeconversion">Type conversion</a></h2>

<h4><a name="TheVault-Typeconversionforastaticinnerclass%3F">Type conversion for a static inner class ?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=15060&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=15060&amp;tstart=0</a></li>
</ul>


<p>Collection_<em>inner property name</em> = <em>your.package.ClassName</em><b>$</b><em>StaticInnerClassName</em> (notice the dollar sign between the fully qualified Class name and the static inner class) </p>

<h2><a name="TheVault-MigrationtoSpringIoC">Migration to Spring IoC</a></h2>

<h4><a name="TheVault-HowcanwemigrateServletRequestAware%2CServletResponseAwareandValidationAwaretoSpringbeandefinitions%3F">How can we migrate ServletRequestAware, ServletResponseAware and ValidationAware to Spring bean definitions?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=13551&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=13551&amp;tstart=0</a></li>
</ul>


<p>I tink just the normal way would work. The action will now be created by spring, and if the ServletConfigInterceptor is in the stack and the action implementation implement those interface, webwork should set the appropriate methods.</p>

<h2><a name="TheVault-Freemarker%2CVelocity%2CJSP">Freemarker, Velocity, JSP</a></h2>

<h4><a name="TheVault-HowtodisableVelocitytemplatecaching%3F">How to disable Velocity template caching ?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=15405&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=15405&amp;tstart=0</a></li>
</ul>


<p>The "wwclass" was the resource loader I need to change.<br/>
Here's the lines from Velocity.props:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">wwfile.resource.loader.cache=<span class="code-keyword">false</span>
wwclass.resource.loader.cache=<span class="code-keyword">false</span></pre>
</div></div>
<p>(<a href="http://jroller.com/page/gigix?entry=velocity_performance_issue_solved" title="Visit page outside Confluence">&#104;ttp://jroller.com/page/gigix?entry=velocity_performance_issue_solved</a>)</p>

<h4><a name="TheVault-HowtocatchFreemarkerexceptions%28theuglybigyellowpages%29">How to catch Freemarker exceptions (the ugly big yellow pages)</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=13829&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=13829&amp;tstart=0</a></li>
</ul>


<p>FreeMarker delegates exception handling to so-called TemplateExceptionHandlers. By default the HTML_DEBUG_HANDLER is used (this one generates the yellow error page), but you can easily specify a different exception handler by using the setTemplateExceptionHandler method of your configuration object. FM provides some simple handlers you can use, in your case I recommend the RETHROW_HANDLER (<br/>
<a href="http://freemarker.org/docs/api/freemarker/template/TemplateExceptionHandler.html" title="Visit page outside Confluence">&#104;ttp://freemarker.org/docs/api/freemarker/template/TemplateExceptionHandler.html</a>).</p>

<h4><a name="TheVault-Myww%3Aincludeactionsaren%27tprocessed">My ww:include actions aren't processed</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=13479&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=13479&amp;tstart=0</a></li>
</ul>


<p>Did you declare the ww tag library in your includes ? If I'm not mistaken, jsp includes work different from ww includes (ww process the pages before including them).</p>

<h4><a name="TheVault-I%27musingww%3AurlHelperincombinationwiththec%3Aouttag%2Cbutitwon%27twork%21">I'm using ww:urlHelper in combination with the c:out tag, but it won't work !</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14312&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14312&amp;tstart=0</a></li>
</ul>


<p>if the url with &amp;amp is used in the value attribute it will not work properly unless the escapeXml is set to false.</p>

<h2><a name="TheVault-Validation">Validation</a></h2>

<h4><a name="TheVault-Howtodisablevalidationonthefirstpageload%28toshowaininputform%29%3F">How to disable validation on the first page load (to show a in input form)?</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14634&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14634&amp;tstart=0</a></li>
</ul>


<p>If you define your own stack you can exclude methods from validation by adding the excludeMethods param to both Validation and Workflow. Assuming you are using the defaultStack the the methods input, back and cancel will be ignored. Change default to action!input and declare the input method to return INPUT.</p>

<h4><a name="TheVault-Whenusingclientsidevalidation%2CDWRstatesitgetsNoDataFromServer">When using clientside validation, DWR states it gets No Data From Server</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14135&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14135&amp;tstart=0</a></li>
</ul>


<p>When using firefox if a user has focus on an input control and then clicks the submit button i get a DWR error stating that there was no data from the server.<br/>
I searched around on this group and did not see a solution. Via the DWR mailing list I found a post fromi Joe Walker stating that a workaround was to register a custom DWR error handler ..<br/>
<a href="http://getahead.ltd.uk/dwr/browser/engine/errors" title="Visit page outside Confluence">&#104;ttp://getahead.ltd.uk/dwr/browser/engine/errors</a></p>

<h4><a name="TheVault-Whycan%27tIuse%26%26%28%3Dand%29inmyvalidationrules%3F%28%3Dor%29doeswork%21">Why can't I use &amp;&amp; (=and) in my validation rules ? || (=or) does work !</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=15576&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=15576&amp;tstart=0</a></li>
</ul>


<p>You can't use &amp;&amp; directly since the validation files have to be wellformed xml. The correct syntax would be &amp;amp ;&amp;amp ; (without the spaces)</p>

<h2><a name="TheVault-Ajax%2CJavascript">Ajax, Javascript</a></h2>

<h4><a name="TheVault-Datepickeri18nproblems">Datepicker i18n problems</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14132&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14132&amp;tstart=0</a></li>
</ul>


<p>DatePicker might have some problems in certain localised enviroments, because some of the language files included in DHTML / JavaScript Calendar are not valid (don't have some variables, for example WEEKEND definition).</p>

<p>Is simple solution to overide files like:<br/>
<a href="http://localhost:8080/showcase/webwork/jscalendar/lang/calendar-" title="Visit page outside Confluence">&#104;ttp://localhost:8080/showcase/webwork/jscalendar/lang/calendar-</a>(your language).js</p>

<p>The only way to fix that, is correct calendar-(your language).js...</p>

<p>Already fixed for 2.2.1, available via CVS HEAD:</p>
<ul class="alternate" type="square">
	<li>sv</li>
	<li>pl</li>
	<li>cn</li>
</ul>


<h2><a name="TheVault-Applicationservers">Application servers</a></h2>

<h4><a name="TheVault-WebWorkhotredeploymentproblemwithTomcat5.5">WebWork hot-redeployment problem with Tomcat 5.5</a></h4>
<ul class="alternate" type="square">
	<li><a href="http://forums.opensymphony.com/thread.jspa?threadID=14553&amp;tstart=0" title="Visit page outside Confluence">&#104;ttp://forums.opensymphony.com/thread.jspa?threadID=14553&amp;tstart=0</a></li>
</ul>


<p>Try to adjust your Tomcat context settings...</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">&lt;Context docBase=<span class="code-quote">"${catalina.home}/webapps/YOURWEBAPP"</span>
         antiResourceLocking=<span class="code-quote">"true"</span> antiJARLocking=<span class="code-quote">"true"</span>&gt;
...
<span class="code-tag">&lt;/Context&gt;</span></pre>
</div></div>

                    			    </td>
		    </tr>
	    </table>
    </body>
</html>

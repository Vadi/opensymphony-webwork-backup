<html>
    <head>
        <title>WebWork - 
        Remote Form Validation
         </title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <p>Asynchronous Client side form validation in WW2.2 is super easy, and super cool.  </p>

<p>Here is what I learned while getting it running.</p>

<p>1) Have <a href="validation.html" title="Validation">WW Validation </a> working already. Go for it, use something cool like a nested validator with a email validation rule.  <br/>
2) You need the latest <a href="http://www.getahead.ltd.uk/dwr/" title="Visit page outside Confluence">DWR </a> jar in WEB-INF/lib.  <br/>
3) Add this code to your web.xml</p>
<div class="code" style="border-style: solid; "><div class="codeHeader" style="border-bottom-style: solid; "><b>web.xml</b></div><div class="codeContent">
<pre class="code-java">&lt;servlet&gt;
        &lt;servlet-name&gt;dwr&lt;/servlet-name&gt;
        &lt;servlet-class&gt;uk.ltd.getahead.dwr.DWRServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;dwr&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/dwr/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</pre>
</div></div>
<p>4) Update an existing form. Depending on how extensively you used WW form controls this step might take a few moments.  The controls all need to be generated via WW tags. No being lazy and just using &lt;form name="xxx".  Ill explain why this is in a moment.  You will need to follow these rules to stay on the happy path:</p>
<ul>
	<li>&lt;ww:form must have an id element.</li>
	<li>Again use only ww: tags</li>
	<li>To turn client side validation on, set the validate="true" attribute</li>
	<li>Well I guess thats it.<br/>
Here is a sample form:
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;ww:form id=<span class="code-quote">"input_form"</span> action=<span class="code-quote">"'SaveUser.action'"</span> method=<span class="code-quote">"post"</span> validate=<span class="code-quote">"<span class="code-keyword">true</span>"</span>&gt;
            &lt;ww:textfield label=<span class="code-quote">"'First Name'"</span> name=<span class="code-quote">"'bo.firstName'"</span> size=<span class="code-quote">"20"</span> required=<span class="code-quote">"<span class="code-keyword">true</span>"</span>/&gt;
            &lt;ww:textfield label=<span class="code-quote">"'Last Name'"</span> name=<span class="code-quote">"'bo.lastName'"</span> size=<span class="code-quote">"20"</span> required=<span class="code-quote">"<span class="code-keyword">true</span>"</span>/&gt;
            &lt;ww:textfield label=<span class="code-quote">"'Email'"</span> name=<span class="code-quote">"'bo.emailAddress'"</span> size=<span class="code-quote">"20"</span> required=<span class="code-quote">"<span class="code-keyword">true</span>"</span>/&gt;
            &lt;ww:submit name=<span class="code-quote">"'submit'"</span> value=<span class="code-quote">"'Save'"</span> cssClass=<span class="code-quote">"'primary'"</span>/&gt;
        &lt;/ww:form&gt;</pre>
</div></div>
<p>See what WW generates for you. This is why its critical to use all the WW tags. There are two things happening here. In the ww:form tag ww includes all the JavaScript libs. And secondly, notice how the ids for all the child elements got filled in based on the name of the parent form?  Thats the second half of the magic. WWs JavaScript uses these ids to getElementById. </p></li>
</ul>


<div class="code"><div class="codeHeader"><b>Generated Code</b></div><div class="codeContent">
<pre class="code-java">&lt;script src=<span class="code-quote">"/agility/webwork/validationClient.js"</span>&gt;&lt;/script&gt;
&lt;script src=<span class="code-quote">"/agility/dwr/<span class="code-keyword">interface</span>/validator.js"</span>&gt;&lt;/script&gt;
&lt;script src=<span class="code-quote">"/agility/dwr/engine.js"</span>&gt;&lt;/script&gt;
&lt;script src=<span class="code-quote">"/agility/webwork/template/xhtml/validation.js"</span>&gt;&lt;/script&gt;
&lt;form namespace=<span class="code-quote">"" id="</span>input_form<span class="code-quote">" name="</span>SubmitUser<span class="code-quote">" action="</span>/agility/SubmitUser.action"&gt;

&lt;p&gt;
&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"input_form_bo.firstName"</span> class=<span class="code-quote">"label"</span>&gt;&lt;span class=<span class="code-quote">"required"</span>&gt;*&lt;/span&gt;First Name:&lt;/label&gt;
&lt;input name=<span class="code-quote">"bo.firstName"</span> size=<span class="code-quote">"20"</span> value=<span class="code-quote">"admin"</span> id=<span class="code-quote">"input_form_bo.firstName"</span> onblur=<span class="code-quote">"validate(<span class="code-keyword">this</span>);"</span> type=<span class="code-quote">"text"</span>&gt;
&lt;/p&gt;
&lt;input type=<span class="code-quote">"submit"</span> name=<span class="code-quote">"submit"</span> value=<span class="code-quote">"Save"</span> class=<span class="code-quote">"primary"</span>/&gt;
&lt;/form&gt;
&lt;p&gt;</pre>
</div></div>

<p>5) Thats about it. You should be off to the races using asynchronous client side validation!!!</p>



                    			    </td>
		    </tr>
	    </table>
    </body>
</html>
